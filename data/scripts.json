[
  {
    "type": "jquery",
    "title": "answerWidth",
    "code": "<style label=\"answerWidth\" cond=\"not gv.request.device.isMobileDevice()\" arg:tw=\"850px\" name=\"question.after\"><![CDATA[\n<style>\n    .grid.grid-table-mode.setWidth {\n max-width: $(tw) !important;\n    }\n\n</style>\n]]></style>",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "subQuestionHeader1",
    "code": "<style label=\"subQuestionHeader1\" arg:headerText=\"testing\" name=\"question.left-blank-legend\"><![CDATA[\n<$(tag) rowspan=\"2\" class=\"cell nonempty legend sub-question-header\">\n  <center><strong>$(headerText)</strong></center>\n</$(tag)>\n<script>\ndocument.querySelectorAll('.sub-question-header')[1].style.display = 'none';\n</script>\n]]></style>",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "hideElements1",
    "code": "<style label=\"hideElements1\" name=\"question.element\"><![CDATA[\n\\@if ec.simpleList\n<div class=\"element $(rowStyle) $(levels) $(extraClasses) ${col.group.styles.ss.groupClassNames if col.group else (row.group.styles.ss.groupClassNames if row.group else \"\")} $(col.styles.ss.colClassNames) $(row.styles.ss.rowClassNames) ${\"clickableCell\" if isClickable else \"\"}\"$(extra)>\n   ${v2_insertStyle('el.label.start')}\n   ${v2_insertStyle('el.label.end')}\n</div>\n\\@else\n<$(tag) $(headers) class=\"cell nonempty element $(levels) ${\"desktop\" if this.grouping.cols else \"mobile\"} border-collapse $(extraClasses) ${col.group.styles.ss.groupClassNames if col.group else (row.group.styles.ss.groupClassNames if row.group else \"\")} $(col.styles.ss.colClassNames) $(row.styles.ss.rowClassNames) ${\"clickableCell\" if isClickable else \"\"}\"$(extra)>\n   ${v2_insertStyle('el.label.start')}\n   ${v2_insertStyle('el.label.end')}\n</$(tag)>\n\\@endif\n]]></style>",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "tableWidth",
    "code": "<style label=\"tableWidth\" cond=\"1\" arg:tx=\"900px\" arg:tx2=\"35.5%\" name=\"question.after\"><![CDATA[\n<script>\nsetInterval(function(){\n$ ('.question').addClass('disableMobileAccordion'); \n$ ('.answers').removeClass('answers-list').addClass('answers-table');    \n$ ('.grid').removeClass('grid-list-mode').addClass('grid-table-mode');\n$ (\"th[scope*=col]\").css('width','fit-content').css('min-width','20px').css('max-width','120px');\n},0);\n</script>\n\n<style>\n.grid.grid-table-mode.setWidth {\n    width: $(tx) !important;\n}\n.grid.grid-table-mode .colCount-7 .col-legend {\n    width: $(tx2);\n}\n</style>\n]]></style>",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "readonly_row_col",
    "code": "<style label=\"readonly_row_col\" cond=\"1\" arg:qn=\"\" name=\"el.text\"><![CDATA[\n<input type=\"number\" name=\"$(name)\" id=\"$(id)\" value=\"$(value)\" size=\"$(size)\" readonly style=\"background-color: #ccc;color: red; font-weight: bold; width: 4em; text-align:center;\" class=\"input text-input\" aria-labelledby=\"$(qn)_${row.label}_left $(qn)_${col.label}\" $(extra)/>\n\\@if row.styles.ss.postText or this.styles.ss.postText\n<span class=\"post-text\">\n    &nbsp;${row.styles.ss.postText or this.styles.ss.postText or \"\"}\n</span>\n\\@endif\n]]></style>",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "mobilescreen1",
    "code": "<style label=\"mobilescreen1\" name=\"question.after\"><![CDATA[\n<div id=\"mobiinst\">\n  <div class=\"mobi-msg\">${res.pipe_mobilescreen}</div>\n  <img src=\"[rel phone.gif]\" alt=\"Rotate phone\" />\n  <br/>\n  <img src=\"[rel mobile_flip.png]\" alt=\"Flip phone\" />\n</div>\n\n<script>\n$ (document).ready(function(){\n  var isMobile = ${\"1\" if gv.request.device.isMobileDevice() else \"0\"};\n\n  function adjustViewport() {\n    var landscape = window.matchMedia(\"(orientation: landscape)\").matches;\n    var content = landscape\n      ? \"width=920, initial-scale=0.8, maximum-scale=1.0, user-scalable=no\"\n      : \"width=device-width, initial-scale=0.9, maximum-scale=1.0, user-scalable=no\";\n\n    // if <meta name=\"viewport\"> doesnâ€™t exist, create it\n    if ($ (\"meta[name=viewport]\").length === 0) {\n      $ (\"head\").append('<meta name=\"viewport\">');\n    }\n    $ (\"meta[name=viewport]\").attr(\"content\", content);\n  }\n\n  function checkOrientation(){\n    $ (\"#mobiinst\").toggle(!window.matchMedia(\"(orientation: landscape)\").matches && isMobile==1);\n    adjustViewport();\n  }\n\n  $ (window).on(\"orientationchange resize\", checkOrientation);\n  checkOrientation(); // run on load\n\n  // Fix answers/grid layout once\n  $ ('.answers').removeClass('answers-list').addClass('answers-table');    \n  $ ('.grid').removeClass('grid-list-mode').addClass('grid-table-mode');\n});\n</script>\n\n<style>\n#mobiinst {\n  display: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  padding: 100px 10px 0 10px;\n  z-index: 9999;\n  width: 100%;\n  height: 100vh;\n  color: red;\n  background-color: #E0E0E0;\n}\n#mobiinst img {\n  max-width: 350px;\n  display: block;\n  height: auto;\n}\n.mobi-msg {\n  width: 350px;\n}\n</style>\n]]></style>",
    "tags": [
      "JS"
    ]
  },
  {
    "type": "jquery",
    "title": "first_column_sum_hide_selected",
    "code": "<style label=\"first_column_sum_hide_selected\" cond=\"1\" arg:cols=\"0,2\" name=\"question.after\"><![CDATA[\n<script>\n$ (document).ready(function () {\n  const qns = \"$(cols)\".split(\",\").map(q => parseInt(q.trim()));\n\n  setTimeout(function () {\n    qns.forEach(function (i) {\n      $ (\"td.sq-autosum-col\").eq(i).html(\"\"); // Clear content of each target column\n    });\n  }, 0);\n});\n</script>\n]]></style>",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "autosum_With_None",
    "code": "<style label=\"autosum_With_None\" cond=\"0\" arg:cls=\"\" arg:qn=\"\" name=\"question.after\"><![CDATA[\n<script>\n$ (document).ready(function () {\n    // Detect the total number of columns by checking .colX class names\n    const columnCount = $ (\"[class*='col']\").filter(function () {\n        return this.className.match(/\\bcol\\d+\\b/);\n    }).map(function () {\n        const match = this.className.match(/\\bcol(\\d+)\\b/);\n        return match ? parseInt(match[1], 10) : null;\n    }).get().reduce((max, num) => Math.max(max, num), 0);\n\n    // Loop through columns and move checkbox input into corresponding .None cell\n    for (let i = 1; i <= columnCount; i++) {\n        $ (\".col\" + i + \".None1\").append($ (\".row\" + i + \" .input\").parent());\n    }\n\n    // Hide question\n    // $ ('#question_$(qn)').hide();\n    $ ('.$(cls)').hide();\n\n    // Checkbox change logic\n    $ (\".checkbox\").on(\"change\", function () {\n        for (let i = 1; i <= columnCount; i++) {\n            const $col = $ (\".col\" + i);\n            if ($col.find(\".checkbox:checked\").length > 0) {\n                $col.find(\".text-input\").val('').change();\n            } else {\n                $col.find(\".text-input\").css({\n                    // 'background-color': '',\n                    'pointer-events': ''\n                });\n            }\n        }\n    });\n\n    // Text input logic\n    for (let i = 1; i <= columnCount; i++) {\n        const $col = $ (\".col\" + i);\n        $col.find(\".text-input\").on(\"input\", function () {\n            $col.find(\".checkbox\").prop(\"checked\", false).trigger(\"change\");\n        });\n    }\n});\n</script>\n]]></style>\n\n  <number \n   label=\"Q110\"\n   autosumdq:operator=\"eq\"\n   autosumdq:sumToVal=\"S9.r1.c2.ival+S9.r2.c2.ival,S9.r1.c3.ival+S9.r2.c3.ival\"\n   grouping=\"cols\"\n   optional=\"0\"\n   size=\"4\"\n   uses=\"autosumdq.6\"\n   verify=\"range(0,999)\">\n    <title>Of the <b>${S9.r1.c2.ival + S9.r2.c2.ival} Phenylketonuria (PKU) patients</b> that are <b>&lt;12 years old</b> with <b>mild-moderate disease</b> and the <b>${S9.r1.c3.ival + S9.r2.c3.ival} patients</b> that are <b>&lt;12 years old</b> with <b>classic/severe disease</b> that you [pipe: hPipe_S8] in the past 12 months, how many received each of the <b>following treatments</b>?</title>\n    <comment>Please enter a whole number in each box.</comment>\n    <exec>\nautoSumEvalPrevResponses(this)\n    </exec>\n\n    <validate>\n# autoSumValidate(this)\nvalidate_open_rows(this, ['r98'])\n\nc1_sum = S9.r1.c2.ival + S9.r2.c2.ival\nc2_sum = S9.r1.c3.ival + S9.r2.c3.ival\nif (c1_sum gt 0) and not Q110x1.r1 and Q110.c1.sum != c1_sum:\n\terror(this.lget('point-mismatch', sum=c1_sum , points=Q110.c1.sum ), col=Q110.c1)\nif (c2_sum gt 0) and not Q110x1.r2 and Q110.c2.sum != c2_sum:\n\terror(this.lget('point-mismatch', sum=c2_sum , points=Q110.c2.sum ), col=Q110.c2)\n    </validate>\n\n    <col label=\"c1\" cond=\"(S9.r1.c2.ival + S9.r2.c2.ival) gt 0\" ss:colClassNames=\"col1\"><b>&lt;12 years old</b> with <b>mild</b><b>-moderate </b>disease <b>(Untreated Phe levels 601-1200 Î¼mol/L)</b></col>\n    <col label=\"c2\" cond=\"(S9.r1.c3.ival + S9.r2.c3.ival) gt 0\" ss:colClassNames=\"col2\"><b>&lt;12 years old</b> with<b> classic/severe </b>disease <b>(Untreated Phe levels &gt;1200 Î¼mol/L)</b></col>\n    <row label=\"r1\">Sepiapterin (SEPHIENCE) + diet restrictions / medical nutrition therapy (MNT)</row>\n    <row label=\"r2\">Pegvaliase (PALYNZIQ) +/- diet restrictions / medical nutrition therapy (MNT)</row>\n    <row label=\"r3\" cond=\"hCountry.US or hCountry.DE or hCountry.IT\">Generic Sapropterin [pipe: pipe_Q100_r3] + diet restrictions / medical nutrition therapy (MNT)</row>\n    <row label=\"r4\">Branded Sapropterin [pipe: pipe_Q100_r4] + diet restrictions / medical nutrition therapy (MNT)</row>\n    <row label=\"r5\" cond=\"hCountry.US\">Branded Sapropterin (Javygtor) + diet restrictions / medical nutrition therapy (MNT)</row>\n    <row label=\"r6\">Diet restrictions / medical nutrition therapy (MNT) only</row>\n    <row label=\"r98\" open=\"1\" openOptional=\"1\" openSize=\"25\" optional=\"1\" randomize=\"0\">Other (please specify:)</row>\n    <row label=\"r99\" optional=\"1\" randomize=\"0\" ss:rowClassNames=\"None1\" where=\"survey,report,notdp\">None of the above</row>\n    <style arg:headerText=\"${res.Hedder_Q110}\" copy=\"subQuestionHeader1\" name=\"question.left-blank-legend\"/>\n    <style cond=\"1\" arg:cls=\"Q110x1\" copy=\"autosum_With_None\" name=\"question.after\"/>\n    <style name=\"el.text\" rows=\"r99\"/>\n    <style cond=\"gv.request.device.isMobileDevice()\" copy=\"mobilescreen1\" name=\"question.after\"/>\n    <style cond=\"not gv.request.device.isMobileDevice()\" arg:tw=\"900px\" copy=\"answerWidth\" name=\"question.after\"/>\n  </number>\n\n  <checkbox \n   label=\"Q110x1\"\n   ss:questionClassNames=\"Q110x1\">\n    <title><span></span></title>\n    <row label=\"r1\" ss:rowClassNames=\"row1\"><b>&lt;12 years old</b> with <b>mild</b><b>-moderate </b>disease <b>(Untreated Phe levels 601-1200 Î¼mol/L)</b></row>\n    <row label=\"r2\" ss:rowClassNames=\"row2\"><b>&lt;12 years old</b> with<b> classic/severe </b>disease <b>(Untreated Phe levels &gt;1200 Î¼mol/L)</b></row>\n  </checkbox>",
    "tags": [
      "JS"
    ]
  },
  {
    "type": "jquery",
    "title": "Tooltip",
    "code": "<style label=\"Tooltip\" name=\"question.after\"><![CDATA[\n<style>\n.custom-tooltip {\n  position: absolute;\n  max-width: 40vw;\n  padding: 6px 10px;\n  border-radius: 6px;\n  font-size: 0.85em;\n  z-index: 10000;\n  background: #000;\n  color: #fff;\n  border: 1px solid #333;\n  box-shadow: 0 2px 6px rgba(0,0,0,0.3);\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  word-wrap: break-word;\n}\n\n.custom-tooltip::after {\n  content: '';\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  border: 6px solid transparent;\n}\n\n.custom-tooltip.bottom::after { bottom: 100%; border-bottom-color: #000; }\n.custom-tooltip.top::after { top: 100%; border-top-color: #000; }\n\n[data-tooltip] { color: #007ac0; cursor: pointer; }\n\n\\@media screen and (max-width: 768px) {\n  .custom-tooltip { max-width: 80%; }\n}\n</style>\n\n<script>\ndocument.addEventListener('DOMContentLoaded', function() {\n  const tooltip = document.createElement('div');\n  tooltip.className = 'custom-tooltip bottom';\n  document.body.appendChild(tooltip);\n\n  function showTooltip(e) {\n    const el = e.currentTarget;\n    const content = el.getAttribute('data-tooltip');\n    if (!content) return;\n\n    tooltip.innerHTML = content;\n    tooltip.style.opacity = '0';\n    tooltip.style.display = 'block';\n\n    const rect = el.getBoundingClientRect();\n    const ttW = tooltip.offsetWidth, ttH = tooltip.offsetHeight;\n    const scrollY = window.scrollY, scrollX = window.scrollX;\n\n    // Choose placement\n    const spaceBelow = window.innerHeight - rect.bottom;\n    const placement = (spaceBelow > ttH + 8) ? 'bottom' : 'top';\n    tooltip.className = 'custom-tooltip ' + placement;\n\n    const left = Math.max(4, Math.min(\n      rect.left + rect.width / 2 - ttW / 2 + scrollX,\n      window.innerWidth - ttW - 4\n    ));\n    const top = (placement === 'bottom')\n      ? rect.bottom + scrollY + 8\n      : rect.top + scrollY - ttH - 8;\n\n    tooltip.style.left = left + 'px';\n    tooltip.style.top = top + 'px';\n    tooltip.style.opacity = '1';\n  }\n\n  function hideTooltip() {\n    tooltip.style.opacity = '0';\n  }\n\n  document.querySelectorAll('[data-tooltip]').forEach(el => {\n    el.addEventListener('mouseenter', showTooltip);\n    el.addEventListener('mouseleave', hideTooltip);\n    el.addEventListener('touchstart', showTooltip);\n    el.addEventListener('touchend', hideTooltip);\n  });\n\n  window.addEventListener('scroll', hideTooltip);\n  window.addEventListener('resize', hideTooltip);\n});\n</script>\n]]></style>\n\n<res label=\"T1\"><span data-tooltip=\"${res.T22}\" data-tooltip-theme=\"tooltip-theme-yellow\">HR <b>BCG NaÃ¯ve</b> NMIBC</span></res>\n<res label=\"T22\">Patients with <b><u>papillary-only</u></b> high-risk non-muscle invasive bladder cancer (HR NMIBC) who have previously received a full course of BCG therapy and are either:<br /><br /><ul><li />BCG Experienced (i.e., recurrence after an initial complete response to BCG)<li />BCG Unresponsive (i.e., persistent or recurrent disease despite adequate BCG <b>* <u>AND</u> CIS within 12 months or HGTa or T1 within 6 months)</b></ul><i>* Adequate Induction (5 of 6 doses) + either 2 of 3 doses of Maintenance OR 2 of 6 doses of second induction</i></res>",
    "tags": [
      "Generic setups"
    ]
  },
  {
    "type": "python",
    "title": "OE validation - Numeric question",
    "code": "def validate_open_rows(this, row_list):\n for row_name in row_list:\n  eachRow = eval(\"this.%s\" % row_name)\n  has_values = any(\n   this.rows[eachRow.index][eachCol.index].val not in [0, \"\", None]\n   for eachCol in this.cols\n  )\n  if has_values and eachRow.open in [\"\", None]:\n   error(this.lget(\"extraInfo\"), eachRow)\n  elif not has_values and eachRow.open not in [\"\", None]:\n   error(this.lget(\"extraSelect\"), eachRow)",
    "tags": [
      "validation"
    ]
  },
  {
    "type": "jquery",
    "title": "Change Total text in autosumdq question.",
    "code": "<style label=\"m1\"\n       arg:txt=\"of all CSU patients I refer to another physician for management\"\n       name=\"question.after\"><![CDATA[\n<script>\n(function () {\n\n    var txt = '${txt}';\n    var timer = setInterval(function () {\n\n        var $el = $ ('td.sq-autosum-empty span.sumTotalVal');\n\n        if ($el.length) {\n            $el.html('<b>' + txt + '</b>');\n            clearInterval(timer); // stop once applied\n        }\n\n    }, 100); // check every 100ms\n\n})();\n</script>\n\n<style>\n.sq-autosum-empty {\n    text-align: center !important;\n}\n</style>\n]]></style>\n",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "Disable print screen,copy for protected-img",
    "code": "<style label=\"disablePasting\" mode=\"after\" name=\"respview.client.js\"><![CDATA[\n<script>\n$ (document).ready(function () {\n\n\n    if ($ (\".protected-img\").length > 0) {\n\n        $ (\"body\").addClass(\"has-protected-img\");\n\n        $ (document).on(\"keydown\", function (e) {\n            if ((e.ctrlKey || e.metaKey) && [\"c\",\"p\",\"s\"].includes(e.key.toLowerCase())) {\n                e.preventDefault();\n            }\n            if (e.key === \"PrintScreen\") {\n                e.preventDefault();\n            }\n        });\n\n        \n        $ (document).on(\"contextmenu\", function (e) {\n            e.preventDefault();\n        });\n    }\n\n});\n</script>\n\n<style>\n\n.protected-img {\n    pointer-events: none !important;\n    user-select: none !important;\n    -webkit-user-drag: none !important;\n}\n\n\n.has-protected-img @media print {\n  body {\n    display: none !important;\n  }\n}\n</style>\n]]></style>\n\n<res label=\"Test\"><img src=\"https://selfserve.decipherinc.com/survey/selfserve/21a7/250744/Product_X_1.png\" width=\"100%\" class=\"zoomable zoomable protected-img\" alt=\"\" /></res>",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "Image and HTML table popup and hyper links",
    "code": "<style label=\"popup_zoom_script_final\" cond=\"1\" mode=\"after\" name=\"respview.client.js\"><![CDATA[\n<script>\n$ (document).ready(function () {\n    // Append overlay/popup once\n    if ($ ('#customZoomOverlay').length === 0) {\n        $ ('body').append(\n            '<div id=\"customZoomOverlay\" style=\"display:none;\">' +\n            '<div id=\"customZoomPopup\">' +\n                '<div class=\"zoom-controls\">' +\n                    // Zoom icon from Fancybox\n                    '<button id=\"customZoomToggle\" class=\"zoom-control-button\" style=\"display:none;\" title=\"Zoom\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M18.7 17.3l-3-3a5.9 5.9 0 0 0-.6-7.6 5.9 5.9 0 0 0-8.4 0 5.9 5.9 0 0 0 0 8.4 5.9 5.9 0 0 0 7.7.7l3 3a1 1 0 0 0 1.3 0c.4-.5.4-1 0-1.5zM8.1 13.8a4 4 0 0 1 0-5.7 4 4 0 0 1 5.7 0 4 4 0 0 1 0 5.7 4 4 0 0 1-5.7 0z\"></path></svg></button>' +\n                    // Close icon from Fancybox\n                    '<button id=\"customZoomClose\" class=\"zoom-control-button\" title=\"Close\"><svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 10.6L6.6 5.2 5.2 6.6l5.4 5.4-5.4 5.4 1.4 1.4 5.4-5.4 5.4 5.4 1.4-1.4-5.4-5.4 5.4-5.4-1.4-1.4-5.4 5.4z\"></path></svg></button>' +\n                '</div>' +\n                '<img id=\"customZoomImage\" src=\"\" style=\"display:none;\" />' +\n                '<video id=\"customZoomVideo\" src=\"\" controls autoplay controlsList=\"nodownload\" playsinline style=\"display:none;\"></video>' +\n            '</div>' +\n            '</div>'\n        );\n    }\n\n    // State variables\n    var scale = 1, originX = 0, originY = 0;\n    var isDragging = false, startX = 0, startY = 0, imgX = 0, imgY = 0;\n    var touchStartDist = 0, lastScale = 1;\n    var lastTapTime = 0;\n    var isMobile = $ (window).width() < 768;\n    var wasDragged = false; // New flag to prevent click event on drag\n\n    // Customizable zoom levels\n    const desktopMinZoom = 0.8;\n    const desktopMaxZoom = 1.0;\n    const mobileMinZoom = 1;\n    const mobileMaxZoom = 1.3;\n\n    function updateTransform() {\n        $ ('#customZoomImage').css('transform', 'translate(' + originX + 'px,' + originY + 'px) scale(' + scale + ')');\n    }\n\n    function closePopup() {\n        $ ('#customZoomOverlay').fadeOut(200);\n        // Reset transform and remove mobile zoom class on close\n        scale = 1;\n        originX = 0;\n        originY = 0;\n        updateTransform();\n        $ ('#customZoomImage').removeClass('zoomed-in-mobile');\n        // Pause video on close\n        $ ('#customZoomVideo')[0].pause();\n    }\n\n    // Open popup function\n    window.openZoomPopup = function (src) {\n        if (!src) return;\n        \n        // Hide all content initially\n        $ ('#customZoomImage, #customZoomVideo').hide();\n        $ ('#customZoomToggle').hide();\n\n        // Check if it's a video file\n        var videoExtensions = ['.mp4', '.mov', '.webm', '.ogg'];\n        var isVideo = videoExtensions.some(ext => src.toLowerCase().endsWith(ext));\n\n        if (isVideo) {\n            var $video = $ ('#customZoomVideo');\n            $video.attr('src', src).show();\n            // Play the video\n            $video[0].play();\n        } else {\n            var $img = $ ('#customZoomImage');\n            $img.attr('src', src).show();\n            $ ('#customZoomToggle').show(); // Show zoom button for images\n            \n            // Reset state variables for image\n            originX = 0; originY = 0;\n            isDragging = false;\n            touchStartDist = 0;\n            lastScale = 1;\n            lastTapTime = 0;\n            wasDragged = false; // Reset drag flag\n\n            // Determine initial image size based on screen width\n            if (isMobile) {\n                $img.css('max-width', '100%');\n                scale = mobileMinZoom;\n            } else {\n                $img.css('max-width', '100%');\n                scale = desktopMinZoom;\n            }\n            \n            updateTransform();\n            $img.off('load.openZoom').on('load.openZoom', function () {\n                updateTransform();\n            });\n        }\n        $ ('#customZoomOverlay').fadeIn(200);\n    };\n\n    // Delegate click on images to open popup\n    $ ('body').on('click', '.zoomable', function (e) {\n        e.preventDefault();\n        var src = $ (this).attr('src') || $ (this).attr('href');\n        window.openZoomPopup(src);\n    });\n\n    // Close handlers\n    $ ('#customZoomClose').on('click', closePopup);\n\t$ ('#customZoomOverlay').on('click', function(e) {\n\t    if (!$ (e.target).is('#customZoomImage, #customZoomVideo, .zoom-control-button, svg, path')) {\n\t        closePopup();\n\t    }\n\t});\n    // Zoom toggle button handler\n    $ ('#customZoomToggle').on('click', function() {\n        if (isMobile) {\n            if (scale === mobileMinZoom) {\n                scale = mobileMaxZoom;\n            } else {\n                scale = mobileMinZoom;\n            }\n        } else {\n            if (scale === desktopMinZoom) {\n                scale = desktopMaxZoom;\n            } else {\n                scale = desktopMinZoom;\n            }\n        }\n        originX = 0;\n        originY = 0;\n        updateTransform();\n    });\n\n    // Handle single and double taps for mobile\n    $ ('#customZoomImage').on('click', function (e) {\n        e.stopPropagation();\n\n        // If a drag just happened, don't execute the click logic\n        if (wasDragged) {\n            wasDragged = false; // Reset the flag\n            return;\n        }\n\n        var currentTime = new Date().getTime();\n        var tapLength = currentTime - lastTapTime;\n\n        if (isMobile) {\n            // Mobile single click handler: toggles between mobileMinZoom and mobileMaxZoom\n            handleMobileClick();\n            \n        } else {\n            handleDesktopClick();\n        }\n    });\n\n    // Mobile click handler: toggles scale between mobileMinZoom and mobileMaxZoom\n    function handleMobileClick() {\n        if (scale === mobileMinZoom) {\n            scale = mobileMaxZoom;\n        } else {\n            scale = mobileMinZoom;\n        }\n        originX = 0;\n        originY = 0;\n        requestAnimationFrame(updateTransform);\n    }\n\n    // Desktop click handler: toggles scale between desktopMinZoom and desktopMaxZoom\n    function handleDesktopClick() {\n        if (scale === desktopMinZoom) {\n            scale = desktopMaxZoom;\n        } else {\n            scale = desktopMinZoom;\n        }\n        originX = 0;\n        originY = 0;\n        requestAnimationFrame(updateTransform);\n    }\n\n    // MOUSE DRAG (desktop)\n    $ ('#customZoomImage').on('mousedown', function (e) {\n        if (e.which !== 1 || isMobile) return;\n        \n        var isZoomed = scale > 1 || $ ('#customZoomImage').hasClass('zoomed-in-mobile');\n        if (!isZoomed) return;\n        \n        isDragging = true;\n        startX = e.clientX;\n        startY = e.clientY;\n        imgX = originX;\n        imgY = originY;\n        $ (this).addClass('grabbing');\n        // Reset the drag flag when a new mousedown occurs\n        wasDragged = false;\n        e.preventDefault();\n    });\n\n    // MOUSEMOVE (shared)\n    $ (document).on('mousemove', function (e) {\n        if (!isDragging) return;\n        var dx = e.clientX - startX;\n        var dy = e.clientY - startY;\n        originX = imgX + dx;\n        originY = imgY + dy;\n        // If there's any movement, it's a drag\n        if (Math.abs(dx) > 5 || Math.abs(dy) > 5) {\n            wasDragged = true;\n        }\n        updateTransform();\n    });\n\n    // MOUSEUP (shared)\n    $ (document).on('mouseup', function () {\n        if (isDragging) {\n            isDragging = false;\n            $ ('#customZoomImage').removeClass('grabbing');\n        }\n    });\n\n    // Prevent native drag\n    $ (document).on('dragstart', '#customZoomImage', function (e) { e.preventDefault(); });\n\n    // TOUCH: pinch zoom + single-finger pan\n    $ ('#customZoomImage').on('touchstart', function (e) {\n        var touches = e.originalEvent.touches;\n        if (!touches) return;\n        e.preventDefault();\n        \n        var isZoomed = scale > 1 || $ ('#customZoomImage').hasClass('zoomed-in-mobile');\n\n        if (touches.length === 2) {\n            var dx = touches[0].pageX - touches[1].pageX;\n            var dy = touches[0].pageY - touches[1].pageY;\n            touchStartDist = Math.sqrt(dx * dx + dy * dy);\n            lastScale = scale;\n        } else if (touches.length === 1 && isZoomed) {\n            isDragging = true;\n            startX = touches[0].clientX;\n            startY = touches[0].clientY;\n            imgX = originX;\n            imgY = originY;\n            $ (this).addClass('grabbing');\n        }\n    });\n\n    $ ('#customZoomImage').on('touchmove', function (e) {\n        var touches = e.originalEvent.touches;\n        if (!touches) return;\n        e.preventDefault();\n        \n        if (touches.length === 2) {\n            var dx = touches[0].pageX - touches[1].pageX;\n            var dy = touches[0].pageY - touches[1].pageY;\n            var newDist = Math.sqrt(dx * dx + dy * dy);\n            if (touchStartDist) {\n                var pinchScale = newDist / touchStartDist;\n                var newScale = lastScale * pinchScale;\n                scale = Math.max(1, Math.min(5, newScale));\n                updateTransform();\n            }\n        } else if (touches.length === 1 && isDragging) {\n            var dx = touches[0].clientX - startX;\n            var dy = touches[0].clientY - startY;\n            originX = imgX + dx;\n            originY = imgY + dy;\n            updateTransform();\n        }\n    });\n\n    $ ('#customZoomImage').on('touchend touchcancel', function (e) {\n        if (isDragging) {\n            isDragging = false;\n            $ (this).removeClass('grabbing');\n        }\n        var touches = e.originalEvent.touches || [];\n        if (!touches.length) {\n            lastScale = scale;\n        }\n    });\n\n    // Mouse wheel zoom (centered visually)\n    $ ('#customZoomPopup').on('wheel', function (e) {\n        if (!isMobile) {\n            e.preventDefault();\n            var delta = (e.originalEvent.deltaY > 0 ? -0.08 : 0.08);\n            scale = Math.max(1, Math.min(5, scale + delta));\n            updateTransform();\n        }\n    });\n});\n\n\n</script>\n\n<script src=\"https://cdn.tailwindcss.com\"></script>\n<style>\n/* Disable interaction with native seek bar */\nvideo::-webkit-media-controls-timeline {\n    pointer-events: none;\n}\nvideo::-webkit-media-controls-seek-back-button,\nvideo::-webkit-media-controls-seek-forward-button {\n    display: none;\n}\n\n/* Shared CSS for both mobile and desktop */\n#customZoomOverlay {\n    position: fixed;\n    top: 0; left: 0;\n    width: 100vw; height: 100vh;\n    background: rgba(0,0,0,0.85);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 9999;\n}\n\n#customZoomPopup {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw !important;\n    height: 100vh !important;\n    max-width: none !important;\n    max-height: none !important;\n    padding: 0 !important;\n    border-radius: 0 !important;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n/* The image element. Sizing will be controlled by JS. */\n#customZoomImage {\n    max-width: 100%;\n    max-height: 100vh;\n    transform-origin: center center;\n    cursor: grab;\n    user-select: none;\n    -webkit-user-drag: none;\n    transition: transform 0.12s ease-out, max-width 0.12s ease-out;\n    display: block;\n    touch-action: none; /* Prevents native browser zoom/pan on touch */\n}\n\n/* The video element */\n#customZoomVideo {\n    max-width: 70%;\n    max-height: 100vh;\n}\n\n/* Class to toggle to 100% on mobile click */\n#customZoomImage.zoomed-in-mobile {\n    max-width: 100% !important;\n}\n\n/* grabbing cursor while dragging */\n#customZoomImage.grabbing {\n    cursor: grabbing;\n}\n\n/* Control buttons container */\n.zoom-controls {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    z-index: 10000;\n    display: flex;\n    gap: 8px;\n}\n\n/* close button */\n.zoom-control-button {\n    background: rgb(220 191 191 / 13%);\n    border: none;\n    cursor: pointer;\n    padding: 6px;\n    border-radius: 4px;\n    width: 38px;\n    height: 38px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: background 0.2s;\n}\n.zoom-control-button:hover {\n    background: rgb(220 191 191 / 13%);\n}\n.zoom-control-button svg {\n    fill: #55d119;\n    width: 100%;\n    height: 100%;\n}\n\n.indent-2 {\n    text-indent: 0.5rem;\n\tpadding-left: 0.50em;\n}\n\n\n    </style>\n]]></style>\n<style label=\"popup_zoom_script_final\" cond=\"1\" mode=\"after\" name=\"respview.client.js\"><![CDATA[\n<script>\n$ (document).ready(function () {\n\n    /* ================= DEVICE ================= */\n    var isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);\n\n    /* ================= CREATE POPUP ================= */\n    if (!$ ('#htmlZoomOverlay').length) {\n        $ ('body').append(\n            '<div id=\"htmlZoomOverlay\" style=\"display:none;\">' +\n              '<div id=\"htmlZoomPopup\">' +\n                '<div class=\"zoom-controls\">' +\n                    '<button id=\"htmlZoomToggle\" class=\"zoom-control-button\" title=\"Zoom\">â¤¢</button>' +\n                    '<button id=\"htmlZoomClose\" class=\"zoom-control-button\" title=\"Close\">Ã—</button>' +\n                '</div>' +\n                '<div id=\"htmlZoomOuter\">' +\n                    '<div id=\"htmlZoomInner\"></div>' +\n                '</div>' +\n              '</div>' +\n            '</div>'\n        );\n    }\n\n    /* ================= STATE ================= */\n    var scale = 1, ox = 0, oy = 0;\n    var dragging = false, wasDragged = false;\n    var sx = 0, sy = 0, ix = 0, iy = 0;\n    var touchStartDist = 0, lastScale = 1;\n\n    var popupSize = 'small';       // desktop\n    var mobilePopupSize = 'small'; // mobile\n\n    /* ================= HELPERS ================= */\n    function updateTransform() {\n        $ ('#htmlZoomInner').css(\n            'transform',\n            'translate(' + ox + 'px,' + oy + 'px) scale(' + scale + ')'\n        );\n    }\n\n    function resetTransform() {\n        scale = 1;\n        ox = 0;\n        oy = 0;\n        updateTransform();\n    }\n\n    function applyPopupSize() {\n\n        if (isMobile) {\n            if (mobilePopupSize === 'small') {\n                $ ('#htmlZoomPopup').css({\n                    width: '90vw',\n                    maxWidth: '90vw',\n                    maxHeight: '95vh'\n                });\n            } else {\n                $ ('#htmlZoomPopup').css({\n                    width: '100vw',\n                    maxWidth: '100vw',\n                    maxHeight: '100vh'\n                });\n            }\n            return;\n        }\n\n        $ ('#htmlZoomPopup')\n            .removeClass('small large')\n            .addClass(popupSize === 'large' ? 'large' : 'small');\n    }\n\n    function autoFit() {\n        $ ('#htmlZoomPopup').css('height', 'auto');\n\n        var table = $ ('#htmlZoomInner').find('table')[0];\n        if (!table) return;\n\n        var vw = $ ('#htmlZoomOuter').width();\n        if (table.offsetWidth > vw) {\n            scale = vw / table.offsetWidth;\n            updateTransform();\n        }\n    }\n\n    /* ================= OPEN ================= */\n    window.openHTMLZoomPopup = function (html) {\n\n        $ ('#htmlZoomInner').html(html);\n        resetTransform();\n\n        popupSize = 'small';\n        mobilePopupSize = 'small';\n\n        applyPopupSize();\n\n        $ ('#htmlZoomOverlay').fadeIn(200, function () {\n            setTimeout(autoFit, 60);\n        });\n    };\n\n    /* ================= TOGGLE SIZE (RESET ALWAYS) ================= */\n    function toggleSize() {\n\n        // ðŸ”‘ HARD RESET on every resize (DESKTOP + MOBILE)\n        resetTransform();\n\n        if (isMobile) {\n            if (mobilePopupSize === 'small') {\n                mobilePopupSize = 'large';\n                applyPopupSize();\n                setTimeout(autoFit, 60);\n            }\n            return;\n        }\n\n        popupSize = popupSize === 'small' ? 'large' : 'small';\n        applyPopupSize();\n        setTimeout(autoFit, 60);\n    }\n\n    $ ('#htmlZoomToggle').on('click', function (e) {\n        e.stopPropagation();\n        toggleSize();\n    });\n\n    $ ('#htmlZoomOuter').on('click', function (e) {\n        if (wasDragged) {\n            wasDragged = false;\n            return;\n        }\n        e.stopPropagation();\n        toggleSize();\n    });\n\n    /* ================= CLOSE ================= */\n    $ ('#htmlZoomClose').on('click', function (e) {\n        e.stopPropagation();\n        resetTransform();\n        $ ('#htmlZoomOverlay').fadeOut(200);\n    });\n\n    $ ('#htmlZoomOverlay').on('click', function (e) {\n        if ($ (e.target).closest('#htmlZoomPopup').length) return;\n        resetTransform();\n        $ ('#htmlZoomOverlay').fadeOut(200);\n    });\n\n    /* ================= MOUSE DRAG ================= */\n    $ ('#htmlZoomOuter').on('mousedown', function (e) {\n        if (e.which !== 1) return;\n\n        dragging = true;\n        wasDragged = false;\n        sx = e.clientX;\n        sy = e.clientY;\n        ix = ox;\n        iy = oy;\n\n        e.preventDefault();\n        e.stopPropagation();\n    });\n\n    $ (document).on('mousemove', function (e) {\n        if (!dragging) return;\n\n        ox = ix + (e.clientX - sx);\n        oy = iy + (e.clientY - sy);\n        updateTransform();\n\n        if (Math.abs(e.clientX - sx) > 4 || Math.abs(e.clientY - sy) > 4) {\n            wasDragged = true;\n        }\n    });\n\n    $ (document).on('mouseup', function () {\n        dragging = false;\n    });\n\n    /* ================= WHEEL ZOOM (DESKTOP) ================= */\n    $ ('#htmlZoomPopup').on('wheel', function (e) {\n        if (isMobile) return;\n\n        e.preventDefault();\n        var delta = e.originalEvent.deltaY > 0 ? -0.08 : 0.08;\n        scale = Math.max(1, Math.min(4, scale + delta));\n        updateTransform();\n    });\n\n    /* ================= TOUCH (MOBILE: PINCH + PAN + SCROLL) ================= */\n    $ ('#htmlZoomOuter').on('touchstart', function (e) {\n        var t = e.originalEvent.touches;\n        wasDragged = false;\n\n        if (t.length === 2) {\n            var dx = t[0].pageX - t[1].pageX;\n            var dy = t[0].pageY - t[1].pageY;\n            touchStartDist = Math.sqrt(dx * dx + dy * dy);\n            lastScale = scale;\n            dragging = false;\n            return;\n        }\n\n        if (t.length === 1 && scale > 1) {\n            dragging = true;\n            sx = t[0].clientX;\n            sy = t[0].clientY;\n            ix = ox;\n            iy = oy;\n            return;\n        }\n\n        dragging = false; // allow native scroll\n    });\n\n    $ ('#htmlZoomOuter').on('touchmove', function (e) {\n        var t = e.originalEvent.touches;\n\n        if (t.length === 2) {\n            e.preventDefault();\n            var dx = t[0].pageX - t[1].pageX;\n            var dy = t[0].pageY - t[1].pageY;\n            var dist = Math.sqrt(dx * dx + dy * dy);\n\n            if (touchStartDist > 0) {\n                scale = Math.max(1, Math.min(4, lastScale * (dist / touchStartDist)));\n                updateTransform();\n                wasDragged = true;\n            }\n            return;\n        }\n\n        if (t.length === 1 && dragging && scale > 1) {\n            e.preventDefault();\n            ox = ix + (t[0].clientX - sx);\n            oy = iy + (t[0].clientY - sy);\n            updateTransform();\n            wasDragged = true;\n        }\n    });\n\n    $ ('#htmlZoomOuter').on('touchend touchcancel', function () {\n        dragging = false;\n        lastScale = scale;\n        touchStartDist = 0;\n    });\n\n    /* ================= OPEN FROM HTML LINK ================= */\n    $ ('body').on('click', 'a.html-pop', function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        var targetId = $ (this).data('target');\n        var $html = $ ('#' + targetId);\n        if ($html.length) {\n            openHTMLZoomPopup($html.prop('outerHTML'));\n        }\n    });\n\n    /* ================= OPEN .Zoomhtml ================= */\n    $ ('body').on('click', '.Zoomhtml', function (e) {\n\n        if ($ ('#htmlZoomOverlay').is(':visible')) {\n            e.stopPropagation();\n            return;\n        }\n\n        if (wasDragged) {\n            wasDragged = false;\n            return;\n        }\n\n        e.preventDefault();\n        openHTMLZoomPopup($ (this).prop('outerHTML'));\n    });\n\n});\n</script>\n\n<style>\n#htmlZoomOverlay {\n    position: fixed;\n    inset: 0;\n    background: rgba(0,0,0,.85);\n    z-index: 999999;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n#htmlZoomPopup {\n    background: #fff;\n    border-radius: 8px;\n    box-shadow: 0 0 30px rgba(0,0,0,.6);\n    transition: width .25s ease, height .25s ease;\n}\n\n#htmlZoomPopup.small { width: 80vw; max-height: 95vh; }\n#htmlZoomPopup.large { width: 95vw; max-height: 95vh; }\n\n#htmlZoomOuter {\n    width: 100%;\n    height: 100%;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n}\n\n#htmlZoomInner {\n    transform-origin: 0 0;\n    display: inline-block;\n    padding: 20px;\n    transition: transform .15s ease-out;\n}\n\n.zoom-controls {\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    display: flex;\n    gap: 8px;\n    z-index: 10000;\n}\n\n.zoom-control-button {\n    background: rgb(220 191 191 / 13%);\n    border: none;\n    cursor: pointer;\n    padding: 0px;\n    font-weight: bold;\n    font-size: xxx-large;\n    border-radius: 4px;\n    width: 38px;\n    height: 38px;\n    color: green;\n    display: flex;\n    justify-content: flex-end;\n    transition: background 0.2s;\n    align-items: anchor-center;\n}\n\n\\@media (max-width:580px) {\n\ttable.Zoomhtml {\n\t    font-size: 0.4em;\n\t    text-wrap: auto;\n\t}\n}\n</style>\n]]></style>\n\n\n<img src=\"https://selfserve.decipherinc.com/survey/selfserve/21a7/250744/Product_X_1.png?cbst_=96n3z2\" width=\"100%\" class=\"zoomable\" alt=\"\" />\n  <a href=\"https://selfserve.decipherinc.com/survey/selfserve/21a7/250744/Product_X_1.png?cbst_=96n3z2\" class=\"zoomable\">Click to view image</a><br />\n  <a href=\"https://isurveys.s3.us-east-1.amazonaws.com/MDS296/8339810-hd_1920_1080_24fps.mp4\" class=\"zoomable cursor-pointer rounded-lg shadow-lg\">Click to play video</a> Hidden question for get price 4 to 5 base on leastfill.\n\nin html need to add -------------> class=\"Zoomhtml\"",
    "tags": [
      "JS"
    ]
  },
  {
    "type": "jquery",
    "title": "Customized drag and drop setup.",
    "code": "<radio \n  label=\"Q500\"\n  grouping=\"cols\"\n  optional=\"1\"\n  ss:listDisplay=\"1\"\n  ss:questionClassNames=\"disableMobileAccordion\">\n  <title>Now weâ€™d like to see how you would put these messages together to create a clear, helpful story about <b>Product X</b>.<br /><br />\nPlease choose the messages that would make <b>[pipe: pipe_Q500]</b> most interested in talking with your doctor about <b>Product X</b>. You can pick as many or as few messages as you want, but you need to choose at least one message from each row.<br /><br />\nYou can pick as many or as few as you want, but please choose <b>at least one from each section</b>.<br /><br />\nHereâ€™s what we would like you to do:<br /><br />\n<ol>\n<li />Pick <b>one message</b> that grabs your attention first.\n<li />Pick <b>2 or 3 messages</b> that you think are the most important.\n<li />Pick <b>one message</b> that you think is the best ending.\n</ol></title>\n  <comment>[res INS_G]</comment>\n  <validate>\nif not (Q500.r1.any or Q500.r2.any or Q500.r3.any or Q500.r4.any):\n    error(\"Please select at least one message from <b>Theme 1</b>.\")\n\nif not (Q500.r5.any or Q500.r6.any or Q500.r7.any or Q500.r8.any):\n    error(\"Please select at least one message from <b>Theme 2</b>.\")\n\nif not (Q500.r9.any or Q500.r10.any or Q500.r11.any or Q500.r12.any):\n    error(\"Please select at least one message from <b>Theme 3</b>.\")\n\nif not (Q500.r13.any or Q500.r14.any or Q500.r15.any or Q500.r16.any):\n    error(\"Please select at least one message from <b>Theme 4</b>.\")\n\nif not Q500.c1.any:\n    error(\"Please select one message in the <b>Start</b> section.\")\n\nA1 = Q500.c2.count + Q500.c3.count + Q500.c4.count\n\nif A1 lt 2:\n    error(\"Please select at least <b>two messages</b> in the <b>Important Points</b> section.\")\n\nif not Q500.c5.any:\n    error(\"Please select one message in the <b>Final Thought</b> section.\")\n  </validate>\n\n  <group label=\"g1\" builder:axis=\"row\">THEME 1</group>\n  <group label=\"g2\" builder:axis=\"row\">THEME 2</group>\n  <group label=\"g3\" builder:axis=\"row\">THEME 3</group>\n  <group label=\"g4\" builder:axis=\"row\">THEME 4</group>\n  <row label=\"r1\" groups=\"g1\" ss:rowClassNames=\"r1\"><b>MESSAGE 1</b> MESSAGE 1 MESSAGE 1 MESSAGE 1 MESSAGE 1MESSAGE 1 MESSAGE 1 MESSAGE 1 MESSAGE 1</row>\n  <row label=\"r2\" groups=\"g1\" ss:rowClassNames=\"r2\">MESSAGE 2 MESSAGE 2 MESSAGE 2 MESSAGE 2 MESSAGE 2MESSAGE 2 MESSAGE 2 MESSAGE 2 MESSAGE 2</row>\n  <row label=\"r3\" groups=\"g1\" ss:rowClassNames=\"r3\">MESSAGE 3 MESSAGE 3 MESSAGE 3 MESSAGE 3 MESSAGE 3MESSAGE 3 MESSAGE 3 MESSAGE 3 MESSAGE 3</row>\n  <row label=\"r4\" groups=\"g1\" ss:rowClassNames=\"r4\">MESSAGE 4 MESSAGE 4 MESSAGE 4 MESSAGE 4 MESSAGE 4MESSAGE 4 MESSAGE 4 MESSAGE 4 MESSAGE 4</row>\n  <row label=\"r5\" groups=\"g2\" ss:rowClassNames=\"r5\">MESSAGE 5 MESSAGE 5 MESSAGE 5 MESSAGE 5 MESSAGE 5MESSAGE 5 MESSAGE 5 MESSAGE 5 MESSAGE 5</row>\n  <row label=\"r6\" groups=\"g2\" ss:rowClassNames=\"r6\">MESSAGE 6 MESSAGE 6 MESSAGE 6 MESSAGE 6 MESSAGE 6MESSAGE 6 MESSAGE 6 MESSAGE 6 MESSAGE 6</row>\n  <row label=\"r7\" groups=\"g2\" ss:rowClassNames=\"r7\">MESSAGE 7 MESSAGE 7 MESSAGE 7 MESSAGE 7 MESSAGE 7MESSAGE 7 MESSAGE 7 MESSAGE 7 MESSAGE 7</row>\n  <row label=\"r8\" groups=\"g2\" ss:rowClassNames=\"r8\">MESSAGE 8 MESSAGE 8 MESSAGE 8 MESSAGE 8 MESSAGE 8MESSAGE 8 MESSAGE 8 MESSAGE 8 MESSAGE 8</row>\n  <row label=\"r9\" groups=\"g3\" ss:rowClassNames=\"r9\">MESSAGE 9 MESSAGE 9 MESSAGE 9 MESSAGE 9 MESSAGE 9MESSAGE 9 MESSAGE 9 MESSAGE 9 MESSAGE 9</row>\n  <row label=\"r10\" groups=\"g3\" ss:rowClassNames=\"r10\">MESSAGE 10 MESSAGE 10 MESSAGE 10 MESSAGE 10 MESSAGE 10 MESSAGE 10 MESSAGE 10 MESSAGE 10 MESSAGE 10</row>\n  <row label=\"r11\" groups=\"g3\" ss:rowClassNames=\"r11\">MESSAGE 11 MESSAGE 11 MESSAGE 11 MESSAGE 11 MESSAGE 11 MESSAGE 11 MESSAGE 11 MESSAGE 11 MESSAGE 11</row>\n  <row label=\"r12\" groups=\"g3\" ss:rowClassNames=\"r12\">MESSAGE 12 MESSAGE 12 MESSAGE 12 MESSAGE 12 MESSAGE 12 MESSAGE 12 MESSAGE 12 MESSAGE 12 MESSAGE 12</row>\n  <row label=\"r13\" groups=\"g4\" ss:rowClassNames=\"r13\">MESSAGE 13 MESSAGE 13 MESSAGE 13 MESSAGE 13 MESSAGE 13 MESSAGE 13 MESSAGE 13 MESSAGE 13 MESSAGE 13</row>\n  <row label=\"r14\" groups=\"g4\" ss:rowClassNames=\"r14\">MESSAGE 14 MESSAGE 14 MESSAGE 14 MESSAGE 14 MESSAGE 14 MESSAGE 14 MESSAGE 14 MESSAGE 14 MESSAGE 14</row>\n  <row label=\"r15\" groups=\"g4\" ss:rowClassNames=\"r15\">MESSAGE 15 MESSAGE 15 MESSAGE 15 MESSAGE 15 MESSAGE 15 MESSAGE 15 MESSAGE 15 MESSAGE 15 MESSAGE 15</row>\n  <row label=\"r16\" groups=\"g4\" ss:rowClassNames=\"r16\">MESSAGE 16 MESSAGE 16 MESSAGE 16 MESSAGE 16 MESSAGE 16 MESSAGE 16 MESSAGE 16 MESSAGE 16 MESSAGE 16</row>\n  <col label=\"c1\" ss:colClassNames=\"c1\">S</col>\n  <col label=\"c2\" ss:colClassNames=\"c2\">L1</col>\n  <col label=\"c3\" ss:colClassNames=\"c3\">L2</col>\n  <col label=\"c4\" ss:colClassNames=\"c4\">L3</col>\n  <col label=\"c5\" ss:colClassNames=\"c5\">S</col>\n  <style label=\"Q500_FINAL_FULL\" cond=\"1\" name=\"question.after\"><![CDATA[\n<style>\n#-grid-table-1 { display:none; }\n\n/* =========================\n   LAYOUT\n========================= */\n.q500-wrap{\n    display:flex;\n    gap:20px;\n    margin-top:20px;\n}\n.q500-themes{ width:100%; }\n.q500-slots{ width:100%;\n\n    border: 1px solid #ccc;\n    border-radius: 12px;\n    overflow: hidden;\n }\n\n/* =========================\n   THEMES\n========================= */\n.theme-box{\n    border:1px solid #ccc;\n    border-radius:6px;\n    margin-bottom:10px;\n    overflow:hidden;\n}\n.theme-header{\n    background:#f5f7fa;\n    padding:10px;\n    font-weight:bold;\n    cursor:pointer;\n    display:flex;\n    align-items:center;\n    gap:8px;\n}\n.theme-arrow{\n    transition:transform .25s ease;\n}\n.theme-box.open .theme-arrow{\n    transform:rotate(90deg);\n}\n.theme-title{ flex:1; }\n.theme-count{\n    min-width:22px;\n    height:22px;\n    line-height:22px;\n    text-align:center;\n    border-radius:50%;\n    font-size:12px;\n    font-weight:bold;\n}\n.count-zero{\n    background:#ffd6d6;\n    color:#b00000;\n}\n.count-ok{\n    background:#e0f2e0;\n    color:#146b14;\n}\n.theme-list{\n    display:none;\n    padding:10px;\n}\n\nul.slot-list.connected.ui-sortable {\n    background: black;\n    padding: 8px;\n}\n.slot-list li.msg {\n    background: #2b2b2b;\n    border-color: #3a3a3a;\n    color: #f9fafb;\n}\n/* =========================\n   MESSAGES\n========================= */\n.msg{\n\tfont-size: small;\n    background:#fff;\n    border:1px solid #ccc;\n    border-radius:6px;\n    padding:6px 8px;\n    margin-bottom:6px;\n    cursor:move;\n    transition:transform .15s ease, box-shadow .15s ease;\n}\n.msg:active{\n    transform:scale(1.02);\n    box-shadow:0 4px 10px rgba(0,0,0,.15);\n}\n\n/* =========================\n   RIGHT PANEL\n========================= */\n.sec-head{\n    background:#000;\n    color:#fff;\n    padding:10px;\n    font-weight:bold;\n}\n.sec-desc{\n    background:#000;\n    color:#ddd;\n    padding:6px 10px;\n    font-style:italic;\n}\n.slot-row{\n    display:flex;\n    border-top:1px solid #000;\n}\n.slot-label {\n    width: 50px;\n    align-items: center;\n    display: flex;\n    padding: 10px;\n    font-weight: bold;\n    justify-content: center;\n    align-content: flex-start;\n}\n.slot-list{\n    flex:1;\n    min-height:52px;\n    padding:10px;\n}\n.placeholder-text{\n    color:#ff6a00;\n    font-size:13px;\n}\n\n/* =========================\n   SORTABLE POLISH\n========================= */\n.ui-sortable-placeholder{\n    height:38px;\n    border:2px dashed #ff6a00;\n    background:#fff8f1;\n}\n.slot-list.ui-sortable-over{\n    background:#f9f9f9;\n}\n\n/* =========================\n   MOBILE\n========================= */\n\\@media (max-width:768px){\n    .q500-wrap{ flex-direction:column; }\n    .q500-themes,.q500-slots{ width:100%; }\n    .theme-header{ padding:12px; }\n}\n\n/* =========================\n   SHELL PANELS\n========================= */\n.q500-shell{\n    display:flex;\n    gap:24px;\n    margin-top:20px;\n}\n\n.q500-left-panel,\n.q500-right-panel{\n    background:#fff;\n    border-radius:12px;\n    box-shadow:0 2px 10px rgba(0,0,0,.06);\n    padding:16px;\n}\n\n.q500-left-panel{ width:35%; }\n.q500-right-panel{ width:65%; }\n\n/* LEFT HEADER */\n.left-title{\n    font-weight:700;\n    text-align:center;\n    margin-bottom:12px;\n    letter-spacing:.5px;\n}\n\n/* RIGHT SECTION HEADERS */\n.block-head{\n    background:#f3f4f6;\n    padding: 10px 12px;\n    border-radius:10px 10px 0 0;\n    text-align:center;\n\n}\n.block-desc{\n    font-style:italic;\n    font-size:13px;\n    color:#666;\n    text-align:center;\n    padding:6px 12px 12px;\n}\n\n/* MOBILE */\n\\@media (max-width:768px){\n    .q500-shell{\n        flex-direction:column;\n    }\n    .q500-left-panel,\n    .q500-right-panel{\n        width:100%;\n    }\n}\n.question ul li, .comment ul li {\n    list-style: none;\n}\n\n</style>\n<link rel=\"stylesheet\" href=\"https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css\">\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.3/jquery.ui.touch-punch.min.js\"></script>\n<script>\n\n$ (document).ready(function(){\n\nvar $grid = $ (\"#-grid-table-1\");\nvar STORE = \"Q500_STATE\";\n\n/* =========================\n   PARSE GRID (DESKTOP + MOBILE SAFE)\n========================= */\nvar data = {};\nvar currentTheme = \"\";\n\n$grid.find(\"th.row-legend-group, th.row-legend-basic\").each(function(){\n    var $th = $ (this);\n\n    if($th.hasClass(\"row-legend-group\")){\n        currentTheme = $.trim($th.html());\n        if(!data[currentTheme]) data[currentTheme]=[];\n        return;\n    }\n\n    if($th.hasClass(\"row-legend-basic\")){\n        var cls = $th.attr(\"class\").match(/r\\d+/);\n        if(!cls || !currentTheme) return;\n        data[currentTheme].push({\n            row:cls[0],\n            text:$.trim($th.html())\n        });\n    }\n});\n\n/* =========================\n   BUILD UI\n========================= */\nfunction section(t,d,rows){\n    var h='';\n    \n    for(var i=0;i<rows.length;i++) h+=rows[i];\n    return h;\n}\nfunction slot(l,c){\n    return '<div class=\"slot-row\">'+\n        '<div class=\"slot-label\">'+l+'</div>'+\n        '<ul class=\"slot-list connected\" data-col=\"'+c+'\" data-max=\"1\">'+\n            '<span class=\"placeholder-text\"></span>'+\n        '</ul></div>';\n}\n\nvar html =\n'<div class=\"q500-shell\">' +\n\n  '<div class=\"q500-left-panel\">' +\n    '<div class=\"left-title\">CATEGORY</div>' +\n    '<div class=\"q500-themes\" id=\"themes\"></div>' +\n  '</div>' +\n\n  '<div class=\"q500-right-panel\">' +\n    '<div class=\"q500-slots\">' +\n\n      '<div class=\"block-head\"><b>START</b><br/><i>The message that catches your attention</i></div>' +\n      \n      section(\"\", \"\", [ slot(\"H\",\"c1\") ]) +\n\n      '<div class=\"block-head\"><b>Important Points</b>: <br/><i>2â€“3 things you think matter most</i></div>' +\n      \n      section(\"\", \"\", [\n        slot(\"L1\",\"c2\"),\n        slot(\"L2\",\"c3\"),\n        slot(\"L3\",\"c4\")\n      ]) +\n\n      '<div class=\"block-head\"><b>Final Thought</b><br/><i>The message you want to end with</i></div>' +\n      \n      section(\"\", \"\", [ slot(\"S\",\"c5\") ]) +\n\n    '</div>' +\n  '</div>' +\n\n'</div>';\n\n$grid.closest(\".answers\").append(html);\n\n/* =========================\n   THEMES UI\n========================= */\n$.each(data,function(t,rows){\n    var box='<div class=\"theme-box\">'+\n      '<div class=\"theme-header\">'+\n        '<span class=\"theme-arrow\">â–¶</span>'+\n        '<span class=\"theme-title\">'+t+'</span>'+\n        '<span class=\"theme-count count-zero\" data-theme=\"'+t+'\">0</span>'+\n      '</div>'+\n      '<ul class=\"theme-list connected\" data-theme=\"'+t+'\">';\n    $.each(rows,function(_,r){\n        box+='<li class=\"msg\" data-row=\"'+r.row+'\" data-theme=\"'+t+'\">'+r.text+'</li>';\n    });\n    box+='</ul></div>';\n    $ (\"#themes\").append(box);\n});\n\n/* Accordion */\n$ (document).on(\"click\",\".theme-header\",function(){\n    $ (this).parent().toggleClass(\"open\")\n           .find(\".theme-list\").slideToggle();\n});\n\n/* =========================\n   SORTABLE\n========================= */\n$ (\".connected\").sortable({\n    connectWith: \".connected\",\n    placeholder: \"ui-sortable-placeholder\",\n    tolerance: \"pointer\",\n\n    /* ðŸ”’ PREVENT MISTOUCH DRAG */\n    delay: 250,        // long-press before drag starts\n    distance: 10,      // finger must move 10px before drag\n\n    start: function (e, ui) {\n        ui.item.addClass(\"dragging\");\n    },\n    stop: function () {\n        $ (\".msg\").removeClass(\"dragging\");\n        syncRadios();\n        saveState();\n        updateCounts();\n        cleanPlaceholders();\n    },\n    receive: function (e, ui) {\n        var $to = $ (this);\n\n        if ($to.data(\"max\") && $to.children(\".msg\").length > 1) {\n            $ (ui.sender).sortable(\"cancel\");\n            return;\n        }\n\n        if ($to.hasClass(\"theme-list\")) {\n            if (ui.item.data(\"theme\") !== $to.data(\"theme\")) {\n                $ (ui.sender).sortable(\"cancel\");\n            }\n        }\n    }\n});\n/* =========================\n   HELPERS\n========================= */\nfunction cleanPlaceholders(){\n    $ (\".slot-list\").each(function(){\n        $ (this).find(\".placeholder-text\")\n               .toggle(!$ (this).children(\".msg\").length);\n    });\n}\n\nfunction syncRadios(){\n    $grid.find(\"input[type=radio]\").prop(\"checked\",false);\n    $ (\".slot-list\").each(function(){\n        var col=$ (this).data(\"col\");\n        $ (this).find(\".msg\").each(function(){\n            $grid.find(\".\"+$ (this).data(\"row\")+\".\"+col+\" input\")\n                 .prop(\"checked\",true);\n        });\n    });\n}\n\nfunction updateCounts(){\n    var cnt={};\n    $ (\".msg\").each(function(){ cnt[$ (this).data(\"theme\")]=0; });\n    $ (\".slot-list .msg\").each(function(){\n        cnt[$ (this).data(\"theme\")]++;\n    });\n    $ (\".theme-count\").each(function(){\n        var t=$ (this).data(\"theme\");\n        var c=cnt[t]||0;\n        $ (this).text(c)\n               .removeClass(\"count-zero count-ok\")\n               .addClass(c? \"count-ok\":\"count-zero\");\n    });\n}\n\n/* =========================\n   STATE\n========================= */\nfunction saveState(){\n    var s={};\n    $ (\".slot-list\").each(function(){\n        var col=$ (this).data(\"col\");\n        $ (this).find(\".msg\").each(function(){\n            s[$ (this).data(\"row\")]=col;\n        });\n    });\n    sessionStorage.setItem(STORE,JSON.stringify(s));\n}\nfunction restoreState(){\n    var s=sessionStorage.getItem(STORE);\n    if(!s) return;\n    s=JSON.parse(s);\n    $.each(s,function(r,c){\n        $ ('.msg[data-row=\"'+r+'\"]').appendTo(\n            '.slot-list[data-col=\"'+c+'\"]'\n        );\n    });\n    syncRadios();\n    updateCounts();\n    cleanPlaceholders();\n}\nrestoreState();\n\n});\n</script>\n]]></style>\n</radio>\n\n<suspend/>\n",
    "tags": [
      "Setup"
    ]
  },
  {
    "type": "jquery",
    "title": "Group rows shown at ATM-ID questions.",
    "code": "<style mode=\"after\" name=\"respview.client.js\"><![CDATA[\n<script>\n(function ($) {\n    $ (window).on('load', function () {\n        setTimeout(function () {\n\n            $ ('.sq-atm1d-widget').each(function () {\n                var widget = $ (this);\n                var atmList = widget.find('.sq-atm1d-buttons');\n                if (!atmList.length) return;\n\n                // look for a table area inside the same question; fallback to any on page\n                var question = widget.closest('.question');\n                var tableArea = question.find('.answers-table');\n                if (!tableArea.length) tableArea = $ ('.answers-table');\n                if (!tableArea.length) return;\n\n                tableArea.find('tr.row-group').each(function () {\n                    var $grp = $ (this);\n\n                    // Keep the full HTML of header (preserve <b>, spans, etc.)\n                    var groupHtml = '';\n                    var th = $grp.find('th').first();\n                    if (th.length) {\n                        groupHtml = th.html();\n                    } else {\n                        // fallback to row text if no th\n                        groupHtml = $grp.html();\n                    }\n                    if (!groupHtml) return;\n\n                    // find the first row-elements after this group\n                    var firstRow = $grp.nextAll('tr.row-elements').first();\n                    if (!firstRow.length) return;\n\n                    // Try 1: extract QA from the th id (e.g. Q1_r1_left -> r1)\n                    var qa = '';\n                    var thRow = firstRow.find('th').first();\n                    if (thRow.length) {\n                        var id = thRow.attr('id') || '';\n                        var m = id.match(/_([^_]+)_left$/); // matches _r1_left or _something_left\n                        if (m && m[1]) qa = m[1];\n                    }\n\n                    // Try 2: fallback to .qaCode.label text like \"[r1]\"\n                    if (!qa) {\n                        var qaText = firstRow.find('.qaCode.label').text().trim();\n                        if (qaText) qa = qaText.replace(/\\[|\\]/g, '').trim();\n                    }\n\n                    if (!qa) return; // give up if still empty\n\n                    // Find matching ATM1D <li>. Try exact, then lowercase/uppercase variants\n                    var liSelector = 'li[data-label=\"' + qa + '\"]';\n                    var targetLi = atmList.find(liSelector);\n                    if (!targetLi.length) targetLi = atmList.find('li[data-label=\"' + qa.toLowerCase() + '\"]');\n                    if (!targetLi.length) targetLi = atmList.find('li[data-label=\"' + qa.toUpperCase() + '\"]');\n                    if (!targetLi.length) {\n                        // another fallback: find by matching the label text inside li to the table label text\n                        var tableLabelText = firstRow.find('th').text().replace(/\\[.*\\]/, '').trim(); // remove any [r1]\n                        targetLi = atmList.find('li').filter(function () {\n                            var t = $ (this).find('.sq-atm1d-legend').text().trim();\n                            return t && t.indexOf(tableLabelText) !== -1;\n                        });\n                    }\n\n                    if (!targetLi.length) {\n                        // no match â€” skip\n                        return;\n                    }\n\n                    // Avoid inserting duplicate group labels\n                    var alreadyInserted = targetLi.prev().hasClass('atm1d-group-label');\n                    if (alreadyInserted) return;\n\n                    // Insert label (preserve HTML)\n                    $ ('<div class=\"atm1d-group-label\" aria-hidden=\"true\"></div>')\n                        .html(groupHtml)\n                        .insertBefore(targetLi);\n                });\n            });\n\n        }, 350); // slight delay for safe rendering\n    });\n})(jQuery);\n\n</script>\n<style>\n.atm1d-group-label {\n    display: block;\n\t    width: 100%;\n    font-size: 16px;\n    margin: 16px 0 10px;\n    padding: 8px 14px;\n\n    background: #eef2ff; /* light indigo */\n    color: #1e3a8a;      /* deep indigo */\n\n    border: 4px double #1e3a8a; /* DOUBLE BORDER */\n    border-radius: 8px;\n}\n.hyper a {\n  display: inline-block;\n  background: #007bff;\n  color: #fff !important;\n  padding: 5px 5px;\n  margin: 2px 0;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: bold;\n  text-decoration: none;\n}\n\n.hyper a:hover {\n  background: #a516a5;\n}\n</style>\n]]></style>\n\n\n\n\n<radio \n  label=\"Q10\"\n  cond=\"hS13.r2\"\n  atm1d:showInput=\"0\"\n  atm1d:small_maxHeight=\"350px\"\n  atm1d:viewMode=\"tiled\"\n  shuffle=\"rows\"\n  uses=\"atm1d.10\">\n  <title>Which <b><u>type</u></b> of <b>insulin pump</b> is currently being used?<br />\nIf you are unsure which type of pump is being used, please click on the pump below to see a picture.</title>\n  <comment>[res INS_S]</comment>\n  <group label=\"g1\" builder:axis=\"row\"><b>Insulin pump (non-automated)</b></group>\n  <group label=\"g2\" builder:axis=\"row\"><b>Insulin pump with Automated Insulin Delivery (AID)</b></group>\n  <row label=\"r1\" groups=\"g1\" value=\"1\"><div style=\"text-align: center;\">${res.Q10_r1}<br /><b>Omnipod DASH (non-AID)</b></div></row>\n  <row label=\"r2\" groups=\"g1\" value=\"2\"><div style=\"text-align: center;\">${res.Q10_r2}<br /><b>Tandem t:slim X2 without Control-IQ</b></div></row>\n  <row label=\"r3\" groups=\"g1\" value=\"3\"><div style=\"text-align: center;\">${res.Q10_r3}<br /><b>Medtronic 630G/530G</b></div></row>\n  <row label=\"r4\" groups=\"g1\" randomize=\"0\" value=\"4\">Other pump (non-automated)</row>\n  <row label=\"r5\" groups=\"g2\" value=\"5\"><div style=\"text-align: center;\">${res.Q10_r5}<br /><b>Omnipod 5</b></div></row>\n  <row label=\"r6\" groups=\"g2\" value=\"6\"><div style=\"text-align: center;\">${res.Q10_r6}<br /><b>Tandem t:slim X2 with Control-IQ</b></div></row>\n  <row label=\"r7\" groups=\"g2\" value=\"7\"><div style=\"text-align: center;\">${res.Q10_r7}<br /><b>Medtronic 770G/780G hybrid closed loop</b></div></row>\n  <row label=\"r98\" groups=\"g2\" randomize=\"0\" value=\"98\">Other pump (automated insulin delivery)</row>\n  <row label=\"r99\" groups=\"g2\" randomize=\"0\" value=\"99\">Don't know/recall</row>\n  <style name=\"question.after\"><![CDATA[\n<style>\n.label_Q10 .sq-atm1d-tiled .sq-atm1d-button {\n    font-size: 15px;\n    height: 291px;\n}\n\n</style>\n]]></style>\n</radio>",
    "tags": [
      "style"
    ]
  },
  {
    "type": "jquery",
    "title": "Maxdiff - same row answer remove",
    "code": "      <style label=\"radio_rank\" name=\"question.after\"><![CDATA[\n<script>\n$ (function () {\n  $ (\"tr.row-elements .clickableCell\").on(\"click\", function () {\n    const $cell = $ (this);\n    const $row = $cell.closest(\"tr\");\n    const $radio = $cell.find(\"input[type=radio]\");\n    const $icon = $cell.find(\".fir-icon\");\n \n    setTimeout(() => {\n      if ($radio.prop(\"checked\")) {\n        $row.find(\".clickableCell\").not($cell).each(function () {\n          const $otherRadio = $ (this).find(\"input[type=radio]\");\n          const $otherIcon = $ (this).find(\".fir-icon\");\n          $otherRadio.prop(\"checked\", false);\n          $otherIcon.removeClass(\"selected\");\n        });\n        $icon.addClass(\"selected\");\n      }\n    }, 10);\n  });\n});\n</script>\n]]></style>",
    "tags": [
      "JS"
    ]
  },
  {
    "type": "jquery",
    "title": "Highlighter - like and dislike questions setup using html table",
    "code": "<checkbox \n  label=\"T1\"\n  builderHint=\"{&quot;rocochoName&quot;:&quot;checkboxgrid&quot;}\"\n  fir=\"off\"\n  grouping=\"cols\"\n  ss:listDisplay=\"0\">\n  <title><i>In this section, you will review a transcript of the ad for</i> <b>IBS-C</b> <i>and asked to highlight the specific messages you like and dislike about the concept, if any.<br /><br />Use the highlighter to select text in the content below. Change highlighters by selecting a different marker color.</i>\n\n<br /><br />${res.Storyboard_X}<br /></title>\n  <res label=\"sys_check-error-atLeast-sing-column\">${res.highlighter_err}</res>\n  <col label=\"c1\" cond=\"1\" ss:colClassNames=\"posCol\">LIKE</col>\n  <col label=\"c2\" cond=\"0\" ss:colClassNames=\"negCol\">DISLIKE</col>\n  <row label=\"r1\" ss:rowClassNames=\"r1\"><strong><u>On-Screen Text</u>:</strong> IBSRELA (tenapanor) tablets 50 mg.</row>\n  <row label=\"r2\" ss:rowClassNames=\"r2\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Saturday plans with IBS-C?</row>\n  <row label=\"r3\" ss:rowClassNames=\"r3\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Sure, because with IBSRELA I can.</row>\n  <row label=\"r4\" ss:rowClassNames=\"r4\"><strong><u>On-Screen Text</u>:</strong> IBSRELA is a prescription medicine used in adults to treat irritable bowel syndrome with constipation (IBS-C).</row>\n  <row label=\"r5\" ss:rowClassNames=\"r5\"><strong><u>On-Screen Text/Voiceover</u>:</strong> IBSRELA can provide rapid relief in as early as 1 week.</row>\n  <row label=\"r6\" ss:rowClassNames=\"r6\"><strong><u>On-Screen Text</u>:</strong> Results may vary. Study results seen in adults with IBS-C. More patients on IBSRELA experienced an overall response for 6 or more of the first 12 treatment weeks than those not taking IBSRELA.</row>\n  <row label=\"r7\" ss:rowClassNames=\"r7\"><strong><u>On-Screen Text/Voiceover</u>:</strong> IBSRELA can improve Bowel Movements by 2X.</row>\n  <row label=\"r8\" ss:rowClassNames=\"r8\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Reduce belly pain by 23% and reduce bloating by 34% vs placebo.</row>\n  <row label=\"r9\" ss:rowClassNames=\"r9\"><strong><u>On-Screen Text</u>:</strong> Individual results may vary. In a 26-week study, people taking IBSRELA had an average of 3.2 complete spontaneous bowel movements vs 1.5 less in those not taking it, 48% less abdominal pain vs 39% less in those not taking it, 43% less bloating vs 32% less in those not taking it.</row>\n  <row label=\"r10\" ss:rowClassNames=\"r10\"><strong><u>On-Screen Text/Voiceover</u>:</strong> You should not give IBSRELA to children 6 to less than 18 years.</row>\n  <row label=\"r11\" ss:rowClassNames=\"r11\"><strong><u>On-Screen Text/Voiceover</u>:</strong> It may harm them. The most common side effect is diarrhea, sometimes severe, and your child could get severe dehydration.</row>\n  <row label=\"r12\" ss:rowClassNames=\"r12\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Stop taking IBSRELA and call your doctor if you develop severe diarrhea. Do not take IBSRELA if you have a bowel blockage.</row>\n  <row label=\"r13\" ss:rowClassNames=\"r13\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Tell your doctor if you are pregnant or breastfeeding and about the medicines you take.</row>\n  <row label=\"r14\" ss:rowClassNames=\"r14\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Other common side effects include swelling, or a feeling of fullness or pressure in your abdomen, gas or dizziness.</row>\n  <row label=\"r15\" ss:rowClassNames=\"r15\"><strong><u>Voiceover</u>:</strong> Sometimes different is what you need and what you deserve.</row>\n  <row label=\"r16\" ss:rowClassNames=\"r16\"><strong><u>Voiceover</u>:</strong> Still experiencing IBS-C symptoms with your current treatment</row>\n  <row label=\"r17\" ss:rowClassNames=\"r17\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Talk to your healthcare provider today.</row>\n  <row label=\"r99\" cond=\"1\" exclusive=\"1\" randomize=\"0\" ss:rowClassNames=\"exclusive_btn\">REMOVE SELECTIONS</row>\n  <style label=\"highlighterstyle_main1\" cond=\"1\" arg:btn_lbl1=\"REMOVE SELECTIONS\" arg:btn_lbl2=\"REMOVE SELECTIONS\" arg:type=\"L\" name=\"question.after\"><![CDATA[\n<style>\n.storyboard-wrapper {\n  width: 100%;\n  border: 1px solid #ccc;\n}\n\n.storyboard-table {\n  width: 100%;\n  border-collapse: collapse;\n  border-bottom: 1px solid #ccc;\n}\n\n.storyboard-table td {\n  border-bottom: 1px solid #ccc;\n  padding: 8px;\n}\n\n.storyboard-text {\n  width: 75%;\n  vertical-align: middle;\n}\n\n.storyboard-image {\n  width: 25%;\n  vertical-align: middle;\n  text-align: center;\n}\n\n.image-container {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end; /* push image to bottom */\n  height: 100%;\n}\n\n.storyboard-image img {\n  max-width: 100%;\n  height: auto;\n  border: 1px solid #ddd;\n}\n\n\\@media (max-width: 768px) {\n.storyboard-wrapper {\n  width: 924px;\n}\n.storyboard-image img {\n  max-width: 100%;\n  height: auto;\n  border: 1px solid #ddd;\n}\n}\n\n/* clickable divs */\n.storyboard-text div[data-row] {\n  cursor: pointer;\n  padding: 4px;\n  margin-bottom: 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n/* highlight colors */\n.storyboard-text div.positive {\n  background:#3BAC32;\n  border:1px solid #00b050;\n  color: #fff;\n}\n.storyboard-text div.negative {\n  background:#D64949;\n  border:1px solid red;\n  color: #fff;\n}\n\n/* hover */\n.storyboard-text div[data-row]:hover {\n  \n  transform:scale(1.02);\n  background-color: #B1DEAD;\n  cursor: pointer;\n}\n\n/* exclusive buttons container */\n.exclusive-buttons-container {\n  margin-top:8px;\n  display:flex;\n  gap:12px;\n}\n\n.hl-disabled { opacity:0.5; pointer-events:none; }\n\n.answers-table {\n    pointer-events: none;\n}\n</style>\n\n\n<script>\n$ (function(){\n    // --- HL Type Setup ---\n    var hlType = (\"$(type)\" || \"LD\").toUpperCase(); // fallback safe\n    var allowPos = hlType.indexOf(\"L\") !== -1;\n    var allowNeg = hlType.indexOf(\"D\") !== -1;\n\n    var positiveRows = [];\n    var negativeRows = [];\n    // var $answersTable = $ ('.answers-table').hide();\n\n    // --- Move exclusive buttons above ---\n    var posTd = $ (\".answers-table td.posCol.exclusive_btn\").detach();\n    var negTd = $ (\".answers-table td.negCol.exclusive_btn\").detach();\n    posTd.find(\"label\").text(\"$(btn_lbl1)\" || \"Positive\");\n    negTd.find(\"label\").text(\"$(btn_lbl2)\" || \"Negative\");\n\n    $ (\"<div class='exclusive-buttons-container'></div>\")\n        .append(posTd)\n        .append(negTd)\n        .insertAfter(\".instruction-text\");\n\n    if (!allowPos){\n        $ (\".exclusive-buttons-container td.posCol\").hide();\n        $ (\".answers-table td.posCol :checkbox\").prop(\"disabled\", true).closest('td').addClass('hl-disabled');\n    }\n    if (!allowNeg){\n        $ (\".exclusive-buttons-container td.negCol\").hide();\n        $ (\".answers-table td.negCol :checkbox\").prop(\"disabled\", true).closest('td').addClass('hl-disabled');\n    }\n\n    // --- Update highlight class ---\n    function updateDivHighlight(row){\n        var $div = $ ('[data-row=\"'+row+'\"]');\n        $div.removeClass('positive negative');\n        if(positiveRows.includes(row)) $div.addClass('positive');\n        if(negativeRows.includes(row)) $div.addClass('negative');\n    }\n\n    // --- DIV CLICK HANDLER ---\n    $ (document).on('click','[data-row]', function(){\n        var row = $ (this).attr('data-row');\n        var $posChk = $ ('.posCol.'+row+' input[type=checkbox]');\n        var $negChk = $ ('.negCol.'+row+' input[type=checkbox]');\n\n        if(hlType === \"LD\"){\n            if(!positiveRows.includes(row) && !negativeRows.includes(row)){\n                positiveRows.push(row);\n                $posChk.prop('checked',true).trigger('change',[{skip:\"1\"}]);\n            } else if(positiveRows.includes(row)){\n                positiveRows = positiveRows.filter(r=>r!==row);\n                negativeRows.push(row);\n                $posChk.prop('checked',false).trigger('change',[{skip:\"1\"}]);\n                $negChk.prop('checked',true).trigger('change',[{skip:\"1\"}]);\n            } else if(negativeRows.includes(row)){\n                negativeRows = negativeRows.filter(r=>r!==row);\n                $negChk.prop('checked',false).trigger('change',[{skip:\"1\"}]);\n            }\n        } else if(hlType === \"L\"){\n            var active = positiveRows.includes(row);\n            positiveRows = active ? positiveRows.filter(r=>r!==row) : [...positiveRows,row];\n            $posChk.prop('checked',!active).trigger('change',[{skip:\"1\"}]);\n        } else if(hlType === \"D\"){\n            var active = negativeRows.includes(row);\n            negativeRows = active ? negativeRows.filter(r=>r!==row) : [...negativeRows,row];\n            $negChk.prop('checked',!active).trigger('change',[{skip:\"1\"}]);\n        }\n\n        updateDivHighlight(row);\n    });\n\n    // --- CHECKBOX CHANGE HANDLER ---\n    $ ('.answers-table :checkbox').on('change', function(e,extra){\n        if(extra && extra.skip) return;\n        var $td = $ (this).closest('td');\n        var m = $td.attr('class').match(/r[0-9]+/);\n        if(!m) return;\n        var row = m[0];\n        if($td.hasClass('exclusive_btn')) return;\n\n        if($td.hasClass('posCol')){\n            if($ (this).is(':checked')){\n                if(!positiveRows.includes(row)) positiveRows.push(row);\n                negativeRows = negativeRows.filter(r=>r!==row);\n                $ ('.negCol.'+row+' input[type=checkbox]').prop('checked',false);\n            } else {\n                positiveRows = positiveRows.filter(r=>r!==row);\n            }\n        }\n        if($td.hasClass('negCol')){\n            if($ (this).is(':checked')){\n                if(!negativeRows.includes(row)) negativeRows.push(row);\n                positiveRows = positiveRows.filter(r=>r!==row);\n                $ ('.posCol.'+row+' input[type=checkbox]').prop('checked',false);\n            } else {\n                negativeRows = negativeRows.filter(r=>r!==row);\n            }\n        }\n        updateDivHighlight(row);\n    });\n\n    // --- INIT FROM CHECKBOXES ---\n    $ ('.answers-table :checkbox:checked').each(function(){\n        var $td = $ (this).closest('td');\n        var m = $td.attr('class').match(/r[0-9]+/);\n        if(!m) return;\n        var row = m[0];\n        if($td.hasClass('posCol')) positiveRows.push(row);\n        if($td.hasClass('negCol')) negativeRows.push(row);\n        updateDivHighlight(row);\n    });\n});\n</script>\n]]></style>\n  <style cond=\"gv.request.device.isMobileDevice() and 0\" copy=\"mobilescreen\"/>\n</checkbox>\n\n<suspend/>\n\n<note>***************** Start main section from here *********************</note>\n<exec>\np.like1=[]\nif T1.c1.any:\n\tp.like1=[x.label for x in T1.rows if x.c1.val]\nprint p.like1\n</exec>\n\n<checkbox \n  label=\"T2\"\n  builderHint=\"{&quot;rocochoName&quot;:&quot;checkboxgrid&quot;}\"\n  fir=\"off\"\n  grouping=\"cols\"\n  ss:listDisplay=\"0\">\n  <title>Now we would like you to think about words or phrases that you DISLIKE.<br /><br />\nLooking at the product description below, please highlight, using your mouse, words, or phrases that you DISLIKE.<br /><br />\nSelect as many words or phrases as apply. You may de-select text you have already highlighted by clicking on it or remove all the text you have highlighted by clicking on the REMOVE SELECTIONS button to the right.<br /><br />\nUse the highlighter to select text in the content below. Change highlighters by selecting a different marker color.<br />\n<br />${res.Storyboard_X}<br /></title>\n  <exec>\nfor x in T2.rows:\n\tx.c1.val=''\nfor x in T1.rows:\n\tif x.c1:\n\t\tT2.attr(x.label).c1.val=1\n  </exec>\n\n  <validate>\nfor each in this.rows:\n\tif each.c1 and each.c2 and each.label not in ['r99']:\n\t\terror(res.unique_err)\n  </validate>\n\n  <res label=\"sys_check-error-atLeast-sing-column\">${res.highlighter_err}</res>\n  <col label=\"c1\" cond=\"1\" optional=\"1\" ss:colClassNames=\"posCol\">LIKE</col>\n  <col label=\"c2\" cond=\"1\" ss:colClassNames=\"negCol\">DISLIKE</col>\n  <row label=\"r1\" ss:rowClassNames=\"r1\"><strong><u>On-Screen Text</u>:</strong> IBSRELA (tenapanor) tablets 50 mg.</row>\n  <row label=\"r2\" ss:rowClassNames=\"r2\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Saturday plans with IBS-C?</row>\n  <row label=\"r3\" ss:rowClassNames=\"r3\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Sure, because with IBSRELA I can.</row>\n  <row label=\"r4\" ss:rowClassNames=\"r4\"><strong><u>On-Screen Text</u>:</strong> IBSRELA is a prescription medicine used in adults to treat irritable bowel syndrome with constipation (IBS-C).</row>\n  <row label=\"r5\" ss:rowClassNames=\"r5\"><strong><u>On-Screen Text/Voiceover</u>:</strong> IBSRELA can provide rapid relief in as early as 1 week.</row>\n  <row label=\"r6\" ss:rowClassNames=\"r6\"><strong><u>On-Screen Text</u>:</strong> Results may vary. Study results seen in adults with IBS-C. More patients on IBSRELA experienced an overall response for 6 or more of the first 12 treatment weeks than those not taking IBSRELA.</row>\n  <row label=\"r7\" ss:rowClassNames=\"r7\"><strong><u>On-Screen Text/Voiceover</u>:</strong> IBSRELA can improve Bowel Movements by 2X.</row>\n  <row label=\"r8\" ss:rowClassNames=\"r8\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Reduce belly pain by 23% and reduce bloating by 34% vs placebo.</row>\n  <row label=\"r9\" ss:rowClassNames=\"r9\"><strong><u>On-Screen Text</u>:</strong> Individual results may vary. In a 26-week study, people taking IBSRELA had an average of 3.2 complete spontaneous bowel movements vs 1.5 less in those not taking it, 48% less abdominal pain vs 39% less in those not taking it, 43% less bloating vs 32% less in those not taking it.</row>\n  <row label=\"r10\" ss:rowClassNames=\"r10\"><strong><u>On-Screen Text/Voiceover</u>:</strong> You should not give IBSRELA to children 6 to less than 18 years.</row>\n  <row label=\"r11\" ss:rowClassNames=\"r11\"><strong><u>On-Screen Text/Voiceover</u>:</strong> It may harm them. The most common side effect is diarrhea, sometimes severe, and your child could get severe dehydration.</row>\n  <row label=\"r12\" ss:rowClassNames=\"r12\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Stop taking IBSRELA and call your doctor if you develop severe diarrhea. Do not take IBSRELA if you have a bowel blockage.</row>\n  <row label=\"r13\" ss:rowClassNames=\"r13\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Tell your doctor if you are pregnant or breastfeeding and about the medicines you take.</row>\n  <row label=\"r14\" ss:rowClassNames=\"r14\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Other common side effects include swelling, or a feeling of fullness or pressure in your abdomen, gas or dizziness.</row>\n  <row label=\"r15\" ss:rowClassNames=\"r15\"><strong><u>Voiceover</u>:</strong> Sometimes different is what you need and what you deserve.</row>\n  <row label=\"r16\" ss:rowClassNames=\"r16\"><strong><u>Voiceover</u>:</strong> Still experiencing IBS-C symptoms with your current treatment</row>\n  <row label=\"r17\" ss:rowClassNames=\"r17\"><strong><u>On-Screen Text/Voiceover</u>:</strong> Talk to your healthcare provider today.</row>\n  <row label=\"r99\" cond=\"1\" exclusive=\"1\" randomize=\"0\" ss:rowClassNames=\"exclusive_btn\">REMOVE SELECTIONS</row>\n  <style label=\"highlighternegs\" cond=\"1\" arg:btn_lbl2=\"REMOVE SELECTIONS\" arg:type=\"D\" name=\"question.after\"><![CDATA[\n<style>\n.storyboard-wrapper {\n  width: 100%;\n  border: 1px solid #ccc;\n}\n\n.storyboard-table {\n  width: 100%;\n  border-collapse: collapse;\n  border-bottom: 1px solid #ccc;\n}\n\n.storyboard-table td {\n  border-bottom: 1px solid #ccc;\n  padding: 8px;\n}\n\n.storyboard-text {\n  width: 75%;\n  vertical-align: middle;\n}\n\n.storyboard-image {\n  width: 25%;\n  vertical-align: middle;\n  text-align: center;\n}\n\n.image-container {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end; /* push image to bottom */\n  height: 100%;\n}\n\n.storyboard-image img {\n  max-width: 70%;\n  height: auto;\n  border: 1px solid #ddd;\n}\n\n\\@media (max-width: 768px) {\n.storyboard-wrapper {\n  width: 924px;\n}\n.storyboard-image img {\n  max-width: 100%;\n  height: auto;\n  border: 1px solid #ddd;\n}\n}\n/* clickable divs */\n.storyboard-text div[data-row] {\n  cursor: pointer;\n  padding: 4px;\n  margin-bottom: 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n\n/* highlight colors */\n.storyboard-text div.positive {\n  background:#3BAC32;\n  border:1px solid red;\n  color: #fff;\n}\n.storyboard-text div.negative {\n  background:#D64949;\n  border:1px solid red;\n  color: #fff;\n}\n\n/* hover effect */\n.storyboard-text div[data-row]:hover {\n  transform:scale(1.02);\n  background-color: #EFB6B6;\n  cursor: pointer;\n}\n\n/* exclusive buttons container */\n.exclusive-buttons-container {\n  margin-top:8px;\n  display:flex;\n  gap:12px;\n}\n\n.hl-disabled { opacity:0.5; pointer-events:none; }\n.hl-readonly { pointer-events:none; }\n.answers-table {\n    pointer-events: none;\n}\n</style>\n\n\n<script>\n$ (function(){\n    var hlType = (\"$(type)\" || \"D\").toUpperCase(); // for this script, typically \"D\"\n    var allowNeg = hlType.indexOf(\"D\") !== -1;\n\n    var negativeRows = [];\n    var prepopulatedPos = ${p.like1} || [];  // array of pre-selected positive rows\n    // var $answersTable = $ ('.answers-table').hide();\n\n    // --- Move exclusive button above ---\n    var $exclusiveBtnTd = $ (\".answers-table td.negCol.exclusive_btn\").detach();\n    $exclusiveBtnTd.find(\"label\").text(\"$(btn_lbl2)\" || \"Negative\");\n    $ (\"<div class='exclusive-buttons-container'></div>\")\n        .append($exclusiveBtnTd)\n        .insertAfter(\".instruction-text\");\n\n    if (!allowNeg){\n        $ (\".exclusive-buttons-container td.negCol\").hide();\n        $ (\".answers-table td.negCol :checkbox\").prop(\"disabled\", true).closest('td').addClass('hl-disabled');\n    }\n\n    // --- Update highlight ---\n    function updateDivHighlight(row){\n        var $div = $ ('[data-row=\"'+row+'\"]');\n        $div.removeClass('positive negative');\n        if(prepopulatedPos.includes(row)){\n            $div.addClass('positive').addClass('hl-readonly');\n        }\n        if(negativeRows.includes(row)){\n            $div.addClass('negative');\n        }\n    }\n\n    // --- DIV CLICK HANDLER (for negatives only) ---\n    $ (document).on('click','[data-row]', function(){\n        var row = $ (this).attr('data-row');\n        if(prepopulatedPos.includes(row)) return; // skip readonly positives\n\n        var $negChk = $ ('.negCol.'+row+' input[type=checkbox]');\n        var active = negativeRows.includes(row);\n        if(active){\n            negativeRows = negativeRows.filter(r=>r!==row);\n            $negChk.prop('checked',false).trigger('change',[{skip:\"1\"}]);\n        } else {\n            negativeRows.push(row);\n            $negChk.prop('checked',true).trigger('change',[{skip:\"1\"}]);\n            // uncheck exclusive if a normal negative is picked\n            $ (\".negCol.exclusive_btn :checkbox\").prop('checked',false);\n        }\n        updateDivHighlight(row);\n    });\n\n    // --- Negative checkbox change handler ---\n    $ ('.answers-table td.negCol:not(.exclusive_btn) input:checkbox').on('change', function(e,extra){\n        if(extra && extra.skip) return;\n        var $td = $ (this).closest('td');\n        var m = $td.attr('class').match(/r[0-9]+/);\n        if(!m) return;\n        var row = m[0];\n        if(prepopulatedPos.includes(row)) return;\n\n        if($ (this).is(':checked')){\n            if(!negativeRows.includes(row)) negativeRows.push(row);\n            $ (\".negCol.exclusive_btn :checkbox\").prop('checked',false);\n        } else {\n            negativeRows = negativeRows.filter(r=>r!==row);\n        }\n        updateDivHighlight(row);\n    });\n\n    // --- Exclusive negative button ---\n    $ ('.negCol.exclusive_btn :checkbox').on('change', function(){\n        if($ (this).is(':checked')){\n            // clear all negatives\n            $ ('.negCol:not(.exclusive_btn) input:checkbox').prop('checked',false).prop('disabled',true);\n            negativeRows = [];\n            $ ('[data-row]').each(function(){\n                var row = $ (this).attr('data-row');\n                if(!prepopulatedPos.includes(row)){\n                    updateDivHighlight(row);\n                }\n            });\n        } else {\n            $ ('.negCol:not(.exclusive_btn) input:checkbox').prop('disabled',false);\n        }\n    });\n\n    // --- Prepopulate positives as readonly ---\n    prepopulatedPos.forEach(function(row){\n        var $chk = $ ('.posCol.'+row+' input:checkbox');\n        $chk.prop('checked',true)\n            .prop('readonly',true)\n            .css('pointer-events','none')\n            .addClass('hl-readonly');\n        updateDivHighlight(row);\n    });\n\n    // --- Init negatives from pre-checked checkboxes ---\n    $ ('.answers-table td.negCol:not(.exclusive_btn) input:checkbox:checked').each(function(){\n        var $td = $ (this).closest('td');\n        var m = $td.attr('class').match(/r[0-9]+/);\n        if(!m) return;\n        var row = m[0];\n        if(!prepopulatedPos.includes(row)){\n            if(!negativeRows.includes(row)) negativeRows.push(row);\n            updateDivHighlight(row);\n        }\n    });\n});\n</script>\n]]></style>\n  <style cond=\"gv.request.device.isMobileDevice()\" copy=\"mobilescreen\"/>\n</checkbox>\n\n<suspend/>",
    "tags": [
      "custom setup"
    ]
  },
  {
    "type": "jquery",
    "title": "Highlighter - like and dislike setup using image.",
    "code": "<checkbox \n  label=\"Q1\"\n  atleast=\"1\"\n  builderHint=\"{&quot;rocochoName&quot;:&quot;checkboxgrid&quot;}\"\n  fir=\"off\"\n  grouping=\"cols\"\n  ss:listDisplay=\"0\">\n  <title><p>Looking again at the description of <strong><span style=\"color: #7030a0;\">Product X</span></strong>, an advanced oral treatment for <strong><span style=\"color: #70ad47;\">moderate-to-severe </span><span style=\"color: #0070c0;\">plaque psoriasis (PsO)</span></strong>, please highlight all of the elements that impact your decision â€“ positively or negatively â€“ whether or not to prescribe <strong><span style=\"color: #7030a0;\">Product X</span></strong>.</p>\n<p><em><u>How to highlight</u>:</em><br />You may click on any text of the profile below that has the (HAND) or when you move/roll the mouse over it.</p>\n<p style=\"padding-left: 40px;\">- Click to highlight â€“ do not click and drag<br />- Click one time for green or â€œ<span style=\"color: #00b050;\">positive</span>â€ impact on your perceptions of this product<br />- Click two times for red or â€œ<span style=\"color: red;\">negative</span>â€ impact on your perceptions of this product<br />- Click again if you want to remove highlightâ€“ <strong>do not click and drag</strong></p>\n\n\n<br /><br /><div class=\"img-container\"><img src=\"[rel PRODUCT_X.JPG]\" alt=\"\" width=\"924px\" height=\"483px\" title=\"\" usemap=\"#image-map\" class=\"imageMap\" /></div>\n<u>&lt;map name=\"image-map\"&gt; \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r1\" coords=\"384,36,100,14\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r2\" coords=\"601,36,386,14\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r3\" coords=\"876,36,602,14\" shape=\"rect\"&gt;\n    \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r4\" coords=\"294,71,98,48\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r5\" coords=\"431,128,587,139\" shape=\"rect\"&gt;\n    \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r6\" coords=\"430,143,587,153\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r7\" coords=\"430,157,587,168\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r8\" coords=\"593,128,749,139\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r9\" coords=\"591,142,749,153\" shape=\"rect\"&gt;\n    \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r10\" coords=\"591,156,749,168\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r11\" coords=\"911,139,753,127\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r12\" coords=\"753,141,911,153\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r13\" coords=\"753,155,911,168\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r14\" coords=\"591,189,750,200\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r15\" coords=\"753,189,911,200\" shape=\"rect\"&gt;\n    \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r16\" coords=\"430,220,590,232\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r17\" coords=\"430,235,590,247\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r18\" coords=\"430,250,590,261\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r19\" coords=\"753,221,911,232\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r20\" coords=\"753,235,911,247\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r21\" coords=\"753,250,911,261\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r22\" coords=\"105,277,385,293\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r23\" coords=\"105,294,825,307\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r24\" coords=\"105,308,277,320\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r25\" coords=\"109,347,687,366\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r26\" coords=\"109,391,160,407\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r27\" coords=\"161,391,474,407\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r28\" coords=\"475,391,811,407\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r29\" coords=\"109,408,632,422\" shape=\"rect\"&gt;\n    \n\n\n &lt;/map&gt;</u> <br /><br /></title>\n  <validate>\nfor each in this.rows:\n\tif each.c1 and each.c2 and each.label not in ['r99']:\n\t\terror(res.unique_err)\n  </validate>\n\n  <res label=\"sys_check-error-atLeast-sing-column\">${res.highlighter_err}</res>\n  <col label=\"c1\" cond=\"1\" ss:colClassNames=\"posCol\">Most Compelling</col>\n  <col label=\"c2\" cond=\"1\" optional=\"1\" ss:colClassNames=\"negCol\">Least Compelling</col>\n  <row label=\"r1\" ss:rowClassNames=\"r1\"><span class=\"coordn\">384,36,100,14</span> - Treatment of <b><i>moderate-to-severe</i></b> plaque psoriasis in adult</row>\n  <row label=\"r2\" ss:rowClassNames=\"r2\"><span class=\"coordn\">601,36,386,14</span> - &amp; pediatric patients 12 years of age and older</row>\n  <row label=\"r3\" ss:rowClassNames=\"r3\"><span class=\"coordn\">876,36,602,14</span> - who are candidates for systemic therapy or phototherapy</row>\n  <row label=\"r4\" ss:rowClassNames=\"r4\"><span class=\"coordn\">294,71,98,48</span> - Oral interleukin (IL)-23 receptor inhibitor</row>\n  <row label=\"r5\" ss:rowClassNames=\"r5\"><span class=\"coordn\">430,128,587,139</span> - % of subjects who achieved IGA score of 0/1* - At Week 16 - 70% vs. deucravacitinib 52%</row>\n  <row label=\"r6\" ss:rowClassNames=\"r6\"><span class=\"coordn\">430,143,587,153</span> - % of subjects who achieved PASI 90 response - At Week 16 - 56% vs. deucravacitinib 32%</row>\n  <row label=\"r7\" ss:rowClassNames=\"r7\"><span class=\"coordn\">430,157,587,168</span> - % of subjects who achieved PASI 100 response - At Week 16 - 31% vs. deucravacitinib 12%</row>\n  <row label=\"r8\" ss:rowClassNames=\"r8\"><span class=\"coordn\">591,128,749,139</span> - % of subjects who achieved IGA score of 0/1* - At Week 24 - 71% vs. deucravacitinib 54%</row>\n  <row label=\"r9\" ss:rowClassNames=\"r9\"><span class=\"coordn\">591,142,749,153</span> - % of subjects who achieved PASI 90 response - At Week 24 - 65% vs. deucravacitinib 42%</row>\n  <row label=\"r10\" ss:rowClassNames=\"r10\"><span class=\"coordn\">591,156,749,168</span> - % of subjects who achieved PASI 100 response - At Week 24 - 40% vs. deucravacitinib 16%</row>\n  <row label=\"r11\" ss:rowClassNames=\"r11\"><span class=\"coordn\">911,139,753,127</span> - % of subjects who achieved IGA score of 0/1* - At Week 52 - 75%</row>\n  <row label=\"r12\" ss:rowClassNames=\"r12\"><span class=\"coordn\">753,141,911,153</span> - % of subjects who achieved PASI 90 response - At Week 52 - 69%</row>\n  <row label=\"r13\" ss:rowClassNames=\"r13\"><span class=\"coordn\">753,155,911,168</span> - % of subjects who achieved PASI 100 response - At Week 52 -45%</row>\n  <row label=\"r14\" ss:rowClassNames=\"r14\"><span class=\"coordn\">591,189,750,200</span> - % of subjects achieve PASI 90 response - At Week 28 - 62% vs. ustekinumab 49%</row>\n  <row label=\"r15\" ss:rowClassNames=\"r15\"><span class=\"coordn\">753,189,911,200</span> - % of subjects achieve PASI 90 response - At Week 52 - 69%</row>\n  <row label=\"r16\" ss:rowClassNames=\"r16\"><span class=\"coordn\">430,220,590,232</span> - % of scalp PsO subjects achieve ss-IGA 0/1 - 66% vs. placebo 11%</row>\n  <row label=\"r17\" ss:rowClassNames=\"r17\"><span class=\"coordn\">430,235,590,247</span> - % of genital PsO subjects achieve s-PGA-G 0/1 - 77% vs. placebo 21%</row>\n  <row label=\"r18\" ss:rowClassNames=\"r18\"><span class=\"coordn\">430,250,590,261</span> - % of adolescents (12+) who achieved PASI 100 response - 30%</row>\n  <row label=\"r19\" ss:rowClassNames=\"r19\"><span class=\"coordn\">753,221,911,232</span> - % of scalp PsO subjects achieve ss-IGA 0/1 - At Week 52 - 70%</row>\n  <row label=\"r20\" ss:rowClassNames=\"r20\"><span class=\"coordn\">753,235,911,247</span> - % of genital PsO subjects achieve s-PGA-G 0/1 - At Week 52- 84%</row>\n  <row label=\"r21\" ss:rowClassNames=\"r21\"><span class=\"coordn\">753,250,911,261</span> - % of adolescents (12+) who achieved PASI 100 response - At Week 52- 55%</row>\n  <row label=\"r22\" ss:rowClassNames=\"r22\"><span class=\"coordn\">105,277,385,293</span> - No routine lab monitoring required after initial TB screening</row>\n  <row label=\"r23\" ss:rowClassNames=\"r23\"><span class=\"coordn\">105,294,825,307</span> - Safety comparable to placebo in clinical trials, with no additional risk of GI disorders, headaches, nasopharyngitis, or acne for patients taking PRODUCT X.</row>\n  <row label=\"r24\" ss:rowClassNames=\"r24\"><span class=\"coordn\">105,308,277,320</span> - Consistent with IL-23i safety profile</row>\n  <row label=\"r25\" ss:rowClassNames=\"r25\"><span class=\"coordn\">109,347,687,366</span> - Significant improvement in PsO-related symptoms (itch, pain, skin tightness, burning, and stinging) as early as week 4</row>\n  <row label=\"r26\" ss:rowClassNames=\"r26\"><span class=\"coordn\">109,391,160,407</span> - 1 pill QD.</row>\n  <row label=\"r27\" ss:rowClassNames=\"r27\"><span class=\"coordn\">161,391,474,407</span> - Take PRODUCT X upon waking on an empty stomach with water.</row>\n  <row label=\"r28\" ss:rowClassNames=\"r28\"><span class=\"coordn\">475,391,811,407</span> - After taking PRODUCT X, wait at least 30 minutes before eating food.</row>\n  <row label=\"r29\" ss:rowClassNames=\"r29\"><span class=\"coordn\">109,408,632,422</span> - As an alternative method of administration, PRODUCT X can be dispersed in water and administered orally.</row>\n  <row label=\"r99\" cond=\"1\" exclusive=\"1\" randomize=\"0\" ss:rowClassNames=\"exclusive_btn\">Nothing in the product profile is positive for me to prescribe it / Nothing in the product profile would negative my prescribing of it</row>\n  <style label=\"highlighterstyle_main1\" cond=\"1\" arg:btn_lbl1=\"${res.Q4Q1_1_btn1}\" arg:btn_lbl2=\"${res.Q4Q1_1_btn2}\" arg:type=\"L\" name=\"question.after\"><![CDATA[\n<style>\n.img-container {\n    position: relative !important;\n    padding: 0px !important;\n    width: 924px !important;\n    height: 483px !important;\n}\n.exclusive-buttons-container {\n    margin-top: -41px !important;\n    display: flex;\n    flex-direction: column;\n}\n/* Hover effect for highlight boxes */\n.highlight:hover {\n    opacity: 0.7;               /* slightly transparent on hover */\n    transform: scale(1.05);     /* subtle zoom */\n    transition: all 0.2s ease;  /* smooth effect */\n    box-shadow: 0 0 10px rgba(0,0,0,0.3); /* glow on hover */\n}\n\n/* Optional: make positive/negative hover different */\n.highlight.positive:hover {\n    border-color: #009940;\n    background-color: rgba(0,176,80,0.35);\n}\n\n.highlight.negative:hover {\n    border-color: #cc0000;\n    background-color: rgba(255,0,0,0.35);\n}\n\n/* Temporary hover highlight */\n.highlight.hover {\n    border-color: #009940;\n    background-color: rgba(0,176,80,0.35);\n    pointer-events: none; /* so it doesn't block clicks */\n}\n.exclsv_table td { border: 1px solid; padding: 8px; }\nlabel { margin-bottom: 0!important; }\n.highlight { position:absolute; cursor:pointer; box-sizing:border-box; z-index:10; }\n.highlight.positive { border:1px solid #00b050; background-color:rgba(0,176,80,0.25);}\n.highlight.negative { border:1px solid red; background-color:rgba(255,0,0,0.25); }\n.img-container { position:relative; display:inline-block; }\n.hl-disabled { opacity:0.5; pointer-events:none; }\n</style>\n\n<script>\n$ (function(){\n    var rawType = \"$(type)\";\n    var hlType = (rawType && rawType.length) ? rawType.toUpperCase() : \"LD\";\n    var allowPos = hlType.indexOf(\"L\") !== -1;\n    var allowNeg = hlType.indexOf(\"D\") !== -1;\n\n    var $answersTable = $ ('.answers-table').hide();\n    var $imgContainer = $ ('.img-container');\n\n    // Move exclusive buttons above table\n    var posTd = $ (\".answers-table td.posCol.exclusive_btn\").detach();\n    var negTd = $ (\".answers-table td.negCol.exclusive_btn\").detach();\n    posTd.find(\"label\").html(\"$(btn_lbl1)\");\n    negTd.find(\"label\").html(\"$(btn_lbl2)\");\n    $ (\"<div class='exclusive-buttons-container'></div>\")\n        .append(posTd)\n        .append(negTd)\n        .insertAfter(\".instruction-text\");\n\n    if (!allowPos){\n        $ (\".exclusive-buttons-container td.posCol\").hide();\n        $ (\".answers-table td.posCol :checkbox\").prop(\"disabled\", true).closest('td').addClass('hl-disabled');\n    }\n    if (!allowNeg){\n        $ (\".exclusive-buttons-container td.negCol\").hide();\n        $ (\".answers-table td.negCol :checkbox\").prop(\"disabled\", true).closest('td').addClass('hl-disabled');\n    }\n\n    // Arrays to track highlights\n    var positiveRows = [];\n    var negativeRows = [];\n\n    // Function to draw/update highlight div\n    function updateHighlight(row, state){\n        $ ('#hl_'+row).remove();\n        if(!state) return;\n\n        var area = $ ('area[data-row=\"'+row+'\"]');\n        if(!area.length) return;\n        var coords = area.attr('coords').split(',').map(Number);\n        if(!coords || coords.some(isNaN)) return;\n\n        var x = Math.min(coords[0], coords[2]),\n            y = Math.min(coords[1], coords[3]),\n            w = Math.abs(coords[2]-coords[0]),\n            h = Math.abs(coords[3]-coords[1]);\n\n        $ ('<div>',{\n            id:'hl_'+row,\n            'class':'highlight ' + state,\n            css:{ left:x+'px', top:y+'px', width:w+'px', height:h+'px', position:'absolute' }\n        }).appendTo($imgContainer)\n          .on('click', function(){ area.trigger('click', [{skip:\"1\"}]); });\n    }\n\n    // Area click handler\n    $ ('area').off('click').on('click', function(e, extra){\n        var row = $ (this).attr('data-row');\n        var $posChk = $ ('.posCol.'+row+' input[type=checkbox]');\n        var $negChk = $ ('.negCol.'+row+' input[type=checkbox]');\n\n        if(hlType === \"LD\"){\n            if(!positiveRows.includes(row) && !negativeRows.includes(row)){\n                positiveRows.push(row);\n                negativeRows = negativeRows.filter(r=>r!==row);\n            } else if(positiveRows.includes(row)){\n                positiveRows = positiveRows.filter(r=>r!==row);\n                negativeRows.push(row);\n            } else if(negativeRows.includes(row)){\n                negativeRows = negativeRows.filter(r=>r!==row);\n            }\n\n            // Update highlight\n            if(positiveRows.includes(row)) updateHighlight(row,'positive');\n            else if(negativeRows.includes(row)) updateHighlight(row,'negative');\n            else updateHighlight(row,null);\n\n            // Sync checkboxes\n            $posChk.prop('checked', positiveRows.includes(row)).trigger('change', [{skip:\"1\"}]);\n            $negChk.prop('checked', negativeRows.includes(row)).trigger('change', [{skip:\"1\"}]);\n        } \n        else if(hlType === \"L\"){\n            var state = $posChk.prop('checked') ? null : 'positive';\n            $posChk.prop('checked', state==='positive').trigger('change', [{skip:\"1\"}]);\n            updateHighlight(row,state);\n        } \n        else if(hlType === \"D\"){\n            var state = $negChk.prop('checked') ? null : 'negative';\n            $negChk.prop('checked', state==='negative').trigger('change', [{skip:\"1\"}]);\n            updateHighlight(row,state);\n        }\n    });\n\n    // Checkbox change handler\n    $ ('.answers-table :checkbox').on('change', function(e, extra){\n        if(extra && extra.skip) return;\n        var $td = $ (this).closest('td');\n        var m = $td.attr('class').match(/r[0-9]+/);\n        if(!m) return;\n        var row = m[0];\n        if($td.hasClass('exclusive_btn')) return;\n\n        if(hlType === \"LD\"){\n            if($td.hasClass('posCol')){\n                if($ (this).is(':checked')){\n                    if(!positiveRows.includes(row)) positiveRows.push(row);\n                    negativeRows = negativeRows.filter(r=>r!==row);\n                    updateHighlight(row,'positive');\n                } else {\n                    positiveRows = positiveRows.filter(r=>r!==row);\n                    updateHighlight(row, negativeRows.includes(row)?'negative':null);\n                }\n            } else if($td.hasClass('negCol')){\n                if($ (this).is(':checked')){\n                    if(!negativeRows.includes(row)) negativeRows.push(row);\n                    positiveRows = positiveRows.filter(r=>r!==row);\n                    updateHighlight(row,'negative');\n                } else {\n                    negativeRows = negativeRows.filter(r=>r!==row);\n                    updateHighlight(row, positiveRows.includes(row)?'positive':null);\n                }\n            }\n        } else {\n            if($td.hasClass('posCol')){\n                var state = $ (this).is(':checked') ? 'positive' : null;\n                updateHighlight(row,state);\n            } else if($td.hasClass('negCol')){\n                var state = $ (this).is(':checked') ? 'negative' : null;\n                updateHighlight(row,state);\n            }\n        }\n    });\n\n    // Initialize highlights from pre-checked checkboxes\n    function drawFromCheckboxes(){\n        $ (':checkbox:checked').each(function(){\n            if($ (this).is(':disabled')) return;\n            var $td = $ (this).closest('td');\n            if($td.hasClass('exclusive_btn')) return;\n            var m = $td.attr('class').match(/r[0-9]+/);\n            if(!m) return;\n            var row = m[0];\n            if($td.hasClass('posCol')) positiveRows.push(row);\n            if($td.hasClass('negCol')) negativeRows.push(row);\n\n            if($td.hasClass('posCol')) updateHighlight(row,'positive');\n            if($td.hasClass('negCol')) updateHighlight(row,'negative');\n        });\n    }\n    // Handle hover effect on image map areas\n\t$ ('area').on('mouseenter', function(){\n\t    var row = $ (this).attr('data-row');\n\t    var area = $ (this);\n\t    var coords = area.attr('coords').split(',').map(Number);\n\t    if(!coords || coords.some(isNaN)) return;\n\t\n\t    var x = Math.min(coords[0], coords[2]),\n\t        y = Math.min(coords[1], coords[3]),\n\t        w = Math.abs(coords[2]-coords[0]),\n\t        h = Math.abs(coords[3]-coords[1]);\n\t\n\t    // Add temporary hover highlight\n\t    $ ('<div>',{\n\t        id:'hl_hover_'+row,\n\t        'class':'highlight hover',\n\t        css:{ left:x+'px', top:y+'px', width:w+'px', height:h+'px', position:'absolute' }\n\t    }).appendTo($ ('.img-container'));\n\t});\n\t\n\t$ ('area').on('mouseleave', function(){\n\t    var row = $ (this).attr('data-row');\n\t    $ ('#hl_hover_'+row).remove(); // remove hover highlight\n\t});\n\t\n\n    // Wait for image to load for proper coords\n    $imgContainer.find('img').on('load', function(){\n        drawFromCheckboxes();\n    }).each(function(){\n        if(this.complete) $ (this).trigger('load');\n    });\n\n});\n</script>\n]]></style>\n  <style cond=\"gv.request.device.isMobileDevice() and 0\" copy=\"mobilescreen\"/>\n</checkbox>\n\n<suspend/>\n\n<note>***************** Start main section from here *********************</note>\n<exec>\np.like=[]\nif Q1.c1.any:\n\tp.like=[x.label for x in Q1.rows if x.c1.val]\nprint p.like\n</exec>\n\n<checkbox \n  label=\"Q2\"\n  atleast=\"1\"\n  builderHint=\"{&quot;rocochoName&quot;:&quot;checkboxgrid&quot;}\"\n  fir=\"off\"\n  grouping=\"cols\"\n  ss:listDisplay=\"0\">\n  <title><p>Looking again at the description of <strong><span style=\"color: #7030a0;\">Product X</span></strong>, an advanced oral treatment for <strong><span style=\"color: #70ad47;\">moderate-to-severe </span><span style=\"color: #0070c0;\">plaque psoriasis (PsO)</span></strong>, please highlight all of the elements that impact your decision â€“ positively or negatively â€“ whether or not to prescribe <strong><span style=\"color: #7030a0;\">Product X</span></strong>.</p>\n<p><em><u>How to highlight</u>:</em><br />You may click on any text of the profile below that has the (HAND) or when you move/roll the mouse over it.</p>\n<p style=\"padding-left: 40px;\">- Click to highlight â€“ do not click and drag<br />- Click one time for green or â€œ<span style=\"color: #00b050;\">positive</span>â€ impact on your perceptions of this product<br />- Click two times for red or â€œ<span style=\"color: red;\">negative</span>â€ impact on your perceptions of this product<br />- Click again if you want to remove highlightâ€“ <strong>do not click and drag</strong></p>\n\n\n<br /><br /><div class=\"img-container\"><img src=\"[rel PRODUCT_X.JPG]\" alt=\"\" width=\"924px\" height=\"483px\" title=\"\" usemap=\"#image-map\" class=\"imageMap\" /></div>\n&lt;map name=\"image-map\"&gt; \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r1\" coords=\"384,36,100,14\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r2\" coords=\"601,36,386,14\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r3\" coords=\"876,36,602,14\" shape=\"rect\"&gt;\n    \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r4\" coords=\"294,71,98,48\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r5\" coords=\"431,128,587,139\" shape=\"rect\"&gt;\n    \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r6\" coords=\"430,143,587,153\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r7\" coords=\"430,157,587,168\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r8\" coords=\"593,128,749,139\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r9\" coords=\"591,142,749,153\" shape=\"rect\"&gt;\n    \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r10\" coords=\"591,156,749,168\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r11\" coords=\"911,139,753,127\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r12\" coords=\"753,141,911,153\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r13\" coords=\"753,155,911,168\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r14\" coords=\"591,189,750,200\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r15\" coords=\"753,189,911,200\" shape=\"rect\"&gt;\n    \n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r16\" coords=\"430,220,590,232\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r17\" coords=\"430,235,590,247\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r18\" coords=\"430,250,590,261\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r19\" coords=\"753,221,911,232\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r20\" coords=\"753,235,911,247\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r21\" coords=\"753,250,911,261\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r22\" coords=\"105,277,385,293\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r23\" coords=\"105,294,825,307\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r24\" coords=\"105,308,277,320\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r25\" coords=\"109,347,687,366\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r26\" coords=\"109,391,160,407\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r27\" coords=\"161,391,474,407\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r28\" coords=\"475,391,811,407\" shape=\"rect\"&gt;\n    &lt;area target=\"\" alt=\"\" title=\"\" href=\"javascript:void(0);\" data-row=\"r29\" coords=\"109,408,632,422\" shape=\"rect\"&gt;\n    \n\n\n &lt;/map&gt; <br /><br /></title>\n  <exec>\nfor x in Q1.rows:\n\tif x.c1:\n\t\tQ2.attr(x.label).c1.val=1\n  </exec>\n\n  <validate>\nfor each in this.rows:\n\tif each.c1 and each.c2 and each.label not in ['r99']:\n\t\terror(res.unique_err)\n  </validate>\n\n  <res label=\"sys_check-error-atLeast-sing-column\">${res.highlighter_err}</res>\n  <col label=\"c1\" cond=\"1\" optional=\"1\" ss:colClassNames=\"posCol\">Most Compelling</col>\n  <col label=\"c2\" cond=\"1\" ss:colClassNames=\"negCol\">Least Compelling</col>\n  <row label=\"r1\" ss:rowClassNames=\"r1\"><span class=\"coordn\">384,36,100,14</span> - Treatment of <b><i>moderate-to-severe</i></b> plaque psoriasis in adult</row>\n  <row label=\"r2\" ss:rowClassNames=\"r2\"><span class=\"coordn\">601,36,386,14</span> - &amp; pediatric patients 12 years of age and older</row>\n  <row label=\"r3\" ss:rowClassNames=\"r3\"><span class=\"coordn\">876,36,602,14</span> - who are candidates for systemic therapy or phototherapy</row>\n  <row label=\"r4\" ss:rowClassNames=\"r4\"><span class=\"coordn\">294,71,98,48</span> - Oral interleukin (IL)-23 receptor inhibitor</row>\n  <row label=\"r5\" ss:rowClassNames=\"r5\"><span class=\"coordn\">430,128,587,139</span> - % of subjects who achieved IGA score of 0/1* - At Week 16 - 70% vs. deucravacitinib 52%</row>\n  <row label=\"r6\" ss:rowClassNames=\"r6\"><span class=\"coordn\">430,143,587,153</span> - % of subjects who achieved PASI 90 response - At Week 16 - 56% vs. deucravacitinib 32%</row>\n  <row label=\"r7\" ss:rowClassNames=\"r7\"><span class=\"coordn\">430,157,587,168</span> - % of subjects who achieved PASI 100 response - At Week 16 - 31% vs. deucravacitinib 12%</row>\n  <row label=\"r8\" ss:rowClassNames=\"r8\"><span class=\"coordn\">591,128,749,139</span> - % of subjects who achieved IGA score of 0/1* - At Week 24 - 71% vs. deucravacitinib 54%</row>\n  <row label=\"r9\" ss:rowClassNames=\"r9\"><span class=\"coordn\">591,142,749,153</span> - % of subjects who achieved PASI 90 response - At Week 24 - 65% vs. deucravacitinib 42%</row>\n  <row label=\"r10\" ss:rowClassNames=\"r10\"><span class=\"coordn\">591,156,749,168</span> - % of subjects who achieved PASI 100 response - At Week 24 - 40% vs. deucravacitinib 16%</row>\n  <row label=\"r11\" ss:rowClassNames=\"r11\"><span class=\"coordn\">911,139,753,127</span> - % of subjects who achieved IGA score of 0/1* - At Week 52 - 75%</row>\n  <row label=\"r12\" ss:rowClassNames=\"r12\"><span class=\"coordn\">753,141,911,153</span> - % of subjects who achieved PASI 90 response - At Week 52 - 69%</row>\n  <row label=\"r13\" ss:rowClassNames=\"r13\"><span class=\"coordn\">753,155,911,168</span> - % of subjects who achieved PASI 100 response - At Week 52 -45%</row>\n  <row label=\"r14\" ss:rowClassNames=\"r14\"><span class=\"coordn\">591,189,750,200</span> - % of subjects achieve PASI 90 response - At Week 28 - 62% vs. ustekinumab 49%</row>\n  <row label=\"r15\" ss:rowClassNames=\"r15\"><span class=\"coordn\">753,189,911,200</span> - % of subjects achieve PASI 90 response - At Week 52 - 69%</row>\n  <row label=\"r16\" ss:rowClassNames=\"r16\"><span class=\"coordn\">430,220,590,232</span> - % of scalp PsO subjects achieve ss-IGA 0/1 - 66% vs. placebo 11%</row>\n  <row label=\"r17\" ss:rowClassNames=\"r17\"><span class=\"coordn\">430,235,590,247</span> - % of genital PsO subjects achieve s-PGA-G 0/1 - 77% vs. placebo 21%</row>\n  <row label=\"r18\" ss:rowClassNames=\"r18\"><span class=\"coordn\">430,250,590,261</span> - % of adolescents (12+) who achieved PASI 100 response - 30%</row>\n  <row label=\"r19\" ss:rowClassNames=\"r19\"><span class=\"coordn\">753,221,911,232</span> - % of scalp PsO subjects achieve ss-IGA 0/1 - At Week 52 - 70%</row>\n  <row label=\"r20\" ss:rowClassNames=\"r20\"><span class=\"coordn\">753,235,911,247</span> - % of genital PsO subjects achieve s-PGA-G 0/1 - At Week 52- 84%</row>\n  <row label=\"r21\" ss:rowClassNames=\"r21\"><span class=\"coordn\">753,250,911,261</span> - % of adolescents (12+) who achieved PASI 100 response - At Week 52- 55%</row>\n  <row label=\"r22\" ss:rowClassNames=\"r22\"><span class=\"coordn\">105,277,385,293</span> - No routine lab monitoring required after initial TB screening</row>\n  <row label=\"r23\" ss:rowClassNames=\"r23\"><span class=\"coordn\">105,294,825,307</span> - Safety comparable to placebo in clinical trials, with no additional risk of GI disorders, headaches, nasopharyngitis, or acne for patients taking PRODUCT X.</row>\n  <row label=\"r24\" ss:rowClassNames=\"r24\"><span class=\"coordn\">105,308,277,320</span> - Consistent with IL-23i safety profile</row>\n  <row label=\"r25\" ss:rowClassNames=\"r25\"><span class=\"coordn\">109,347,687,366</span> - Significant improvement in PsO-related symptoms (itch, pain, skin tightness, burning, and stinging) as early as week 4</row>\n  <row label=\"r26\" ss:rowClassNames=\"r26\"><span class=\"coordn\">109,391,160,407</span> - 1 pill QD.</row>\n  <row label=\"r27\" ss:rowClassNames=\"r27\"><span class=\"coordn\">161,391,474,407</span> - Take PRODUCT X upon waking on an empty stomach with water.</row>\n  <row label=\"r28\" ss:rowClassNames=\"r28\"><span class=\"coordn\">475,391,811,407</span> - After taking PRODUCT X, wait at least 30 minutes before eating food.</row>\n  <row label=\"r29\" ss:rowClassNames=\"r29\"><span class=\"coordn\">109,408,632,422</span> - As an alternative method of administration, PRODUCT X can be dispersed in water and administered orally.</row>\n  <row label=\"r99\" cond=\"1\" exclusive=\"1\" randomize=\"0\" ss:rowClassNames=\"exclusive_btn\">Nothing in the product profile is positive for me to prescribe it / Nothing in the product profile would negative my prescribing of it</row>\n  <style label=\"highlighternegs\" cond=\"1\" arg:btn_lbl1=\"${res.Q4Q1_1_btn1}\" arg:btn_lbl2=\"${res.Q4Q1_1_btn2}\" arg:prev=\"L\" arg:type=\"D\" name=\"question.after\"><![CDATA[\n<style>\n/* Temporary hover highlight */\n.highlight.hover {\n    border-color: #009940;\n    background-color:rgba(255,0,0,0.25);\n    pointer-events: none; /* so it doesn't block clicks */\n}\n\n.img-container {\n    position: relative !important;\n    padding: 0px !important;\n    width: 924px !important;\n    height: 483px !important;\n}\n.exclusive-buttons-container {\n    margin-top: -41px !important;\n    display: flex;\n    flex-direction: column;\n}\n.exclsv_table td { border: 1px solid; padding: 8px; }\nlabel { margin-bottom: 0!important; }\n.highlight { \n    position:absolute; \n    box-sizing:border-box; \n    pointer-events:none;\n    transition: background-color 0.2s, opacity 0.2s;\n}\n.highlight.positive { border:1px solid #00b050; background-color:rgba(0,176,80,0.25); }\n.highlight.negative { border:1px solid red; background-color:rgba(255,0,0,0.25); }\n.img-container { position:relative; display:inline-block; }\n.hl-disabled { opacity:0.5; pointer-events:none; }\n.hl-readonly { pointer-events:none; }\n</style>\n\n<script>\n$ (function() {\n    var $imgContainer = $ ('.img-container');\n    var $answersTable = $ ('.answers-table').hide();\n    var prepopulatedPos = ${p.like}; // pre-selected positive rows\n\n    // Move exclusive button outside table\n    var $exclusiveBtnTd = $ (\".answers-table td.negCol.exclusive_btn\").detach();\n    $exclusiveBtnTd.find(\"label\").html(\"$(btn_lbl2)\");\n    $ (\"<div class='exclusive-buttons-container'></div>\")\n        .append($exclusiveBtnTd)\n        .insertAfter(\".instruction-text\");\n\n    // Disable positive exclusive checkboxes\n    // $ (\".posCol.exclusive_btn :checkbox\").prop(\"disabled\", true).closest('td').addClass('hl-disabled');\n\n    // --- Highlight functions ---\n    function addHighlight(row, state, readonly) {\n        var coordsAttr = $ ('area[data-row=\"' + row + '\"]').attr('coords');\n        if (!coordsAttr) return;\n        var coords = coordsAttr.split(',').map(Number);\n        var x = Math.min(coords[0], coords[2]);\n        var y = Math.min(coords[1], coords[3]);\n        var width = Math.abs(coords[2] - coords[0]);\n        var height = Math.abs(coords[3] - coords[1]);\n        var cls = 'highlight ' + state + (readonly ? ' hl-readonly' : '');\n        \n        if ($ ('#hl_' + row).length) return; // prevent duplicate\n\n        $ ('<div>', {\n            id: 'hl_' + row,\n            'class': cls,\n            css: { left: x + 'px', top: y + 'px', width: width + 'px', height: height + 'px' }\n        }).appendTo($imgContainer).hide().fadeIn(200);\n    }\n\n    function removeHighlight(row) {\n        var $hl = $ ('#hl_' + row + '.negative');\n        if ($hl.length) $hl.fadeOut(200, function() { $ (this).remove(); });\n    }\n\n    // --- Negative toggle function ---\n    function setNegative(row, active) {\n        if (prepopulatedPos.includes(row)) return;\n        var $chk = $ ('.negCol').filter(function(){ return $ (this).hasClass(row); }).find('input[type=checkbox]');\n        $chk.prop('checked', active);\n\n        var $hl = $ ('#hl_' + row + '.negative');\n        if (active && !$hl.length) addHighlight(row, 'negative', false);\n        else if (!active && $hl.length) removeHighlight(row);\n\n        // Turn off exclusive if any negative is active\n        $ (\".negCol.exclusive_btn :checkbox\").prop('checked', false).prop('disabled', false);\n    }\n\n    // --- Image map click ---\n    $ ('area').off('click').on('click', function() {\n        var row = $ (this).attr('data-row');\n        if (prepopulatedPos.includes(row)) return;\n        var $chk = $ ('.negCol').filter(function(){ return $ (this).hasClass(row); }).find('input[type=checkbox]');\n        setNegative(row, !$chk.is(':checked'));\n    });\n\n    // --- Negative checkbox change ---\n    $ ('.negCol:not(.exclusive_btn) input:checkbox').off('change').on('change', function() {\n        var row = ($ (this).closest('td').attr('class').match(/r[0-9]+/) || [])[0];\n        if (!row || prepopulatedPos.includes(row)) return;\n        setNegative(row, $ (this).is(':checked'));\n    });\n\n    // --- Exclusive negative button ---\n    $ ('.negCol.exclusive_btn :checkbox').off('change').on('change', function() {\n        if ($ (this).is(':checked')) {\n            // uncheck and disable all other negatives\n            $ ('.negCol:not(.exclusive_btn) input:checkbox').prop('checked', false).prop('disabled', true);\n            $imgContainer.find('.highlight.negative').fadeOut(200, function(){ $ (this).remove(); });\n        } else {\n            $ ('.negCol:not(.exclusive_btn) input:checkbox').prop('disabled', false);\n        }\n    });\n\t// Handle hover effect on image map areas\n\t$ ('area').on('mouseenter', function(){\n\t    var row = $ (this).attr('data-row');\n\t    // If highlight already exists â†’ just add hover style\n\t    var $hl = $ ('#hl_'+row);\n\t    if ($hl.length) {\n\t        $hl.addClass('hover');\n\t        return;\n\t    }\n\t    // Otherwise draw a temporary hover box\n\t    var coords = $ (this).attr('coords').split(',').map(Number);\n\t    if(coords && !coords.some(isNaN)){\n\t        var x = Math.min(coords[0], coords[2]),\n\t            y = Math.min(coords[1], coords[3]),\n\t            w = Math.abs(coords[2]-coords[0]),\n\t            h = Math.abs(coords[3]-coords[1]);\n\t        $ ('<div>',{\n\t            id:'hl_hover_'+row,\n\t            'class':'highlight hover',\n\t            css:{ left:x+'px', top:y+'px', width:w+'px', height:h+'px' }\n\t        }).appendTo($ ('.img-container'));\n\t    }\n\t});\n\t\n\t$ ('area').on('mouseleave', function(){\n\t    var row = $ (this).attr('data-row');\n\t    // Remove hover class if permanent highlight exists\n\t    var $hl = $ ('#hl_'+row);\n\t    if ($hl.length) {\n\t        $hl.removeClass('hover');\n\t    }\n\t    // Remove temporary hover highlight if no permanent one\n\t    $ ('#hl_hover_'+row).remove();\n\t});\n\n\t\n\n\t// --- Prepopulate positives (readonly) ---\n\tprepopulatedPos.forEach(function(row) {\n\t    var $chk = $ ('.posCol').filter(function(){ return $ (this).hasClass(row); }).find('input:checkbox');\n\t    $chk.prop('checked', true)          // keep checkbox checked\n\t        .prop('readonly', true)         // readonly prevents programmatic change in some browsers\n\t        .css('pointer-events', 'none')  // prevent user clicks\n\t        .addClass('hl-readonly');       // optional CSS class for styling\n\t    addHighlight(row, 'positive', true); // highlight positive\n\t});\n\t\n    // --- Restore previously selected negatives ---\n    $ ('.answers-table td.negCol:not(.exclusive_btn) input:checkbox:checked').each(function() {\n        var row = ($ (this).closest('td').attr('class').match(/r[0-9]+/) || [])[0];\n        if (row && !prepopulatedPos.includes(row)) setNegative(row, true);\n    });\n});\n</script>\n]]></style>\n  <style cond=\"gv.request.device.isMobileDevice()\" copy=\"mobilescreen\"/>\n</checkbox>\n\n<suspend/>",
    "tags": [
      "custom setup"
    ]
  }
]